<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#64ffda">
    <meta name="description" content="Take control of your finances with our intuitive expense tracker">
    <meta name="keywords" content="expense tracker, budget, finance, money management, PWA">
    <meta name="author" content="ExpenseFlow">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- PWA Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ExpenseFlow">
    <meta name="msapplication-TileColor" content="#0f0f23">
    <meta name="msapplication-navbutton-color" content="#64ffda">
    
    <!-- Removed manifest to fix 404 error -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iNDIiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhclswXSkiLz4KPHBhdGggZD0iTTQ4IDY0SDQ4LjA0OEgxNDRWMTI4SDk2VjE0NEgxNDRDMTUyLjgzNyAxNDQgMTYwIDEzNi44MzcgMTYwIDEyOFY2NEM1OCA1Ni4xNjMgNTIuMDQzIDQ4IDQ4IEg0OEM0MC4wNzEgNDggMzIgNTYuMDcxIDMyIDY0VjEyOEMzMiAxMzUuOTI5IDQwLjA3MSAxNDQgNDggMTQ0SDgwVjEyOEg0OFY2NFoiIGZpbGw9IiM2NGZmZGEiLz4KPHBhdGggZD0iTTY0IDgwSDgwVjk2SDY0VjgwWiIgZmlsbD0iIzY0ZmZkYSIvPgo8cGF0aCBkPSJNOTYgODBIMTI4Vjk2SDk2VjgwWiIgZmlsbD0iIzY0ZmZkYSIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJncmFkaWVudDBfbGluZWFyWzBdIiB4MT0iMCIgeTE9IjAiIHgyPSIxOTIiIHkyPSIxOTIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzY2N2VlYSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM3NjRiYTIiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K">
    
    <title>ExpenseFlow - Smart Money Management</title>
    <link rel="stylesheet" href="expensetracker.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
      :root {
        /* Color Palette */
        --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        --warning-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        --dark-gradient: linear-gradient(135deg, #232526 0%, #414345 100%);
        
        /* Background Colors */
        --bg-primary: #0f0f23;
        --bg-secondary: #1a1a2e;
        --bg-tertiary: #16213e;
        --bg-glass: rgba(255, 255, 255, 0.1);
        
        /* Text Colors */
        --text-primary: #ffffff;
        --text-secondary: #b4b4b4;
        --text-accent: #64ffda;
        
        /* Accent Colors */
        --accent-primary: #64ffda;
        --accent-secondary: #ff6b9d;
        --success: #00e676;
        --error: #ff5722;
        --warning: #ffc107;
        
        /* Shadows */
        --shadow-glass: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        --shadow-hover: 0 15px 35px rgba(0, 0, 0, 0.1);
        --shadow-card: 0 8px 16px rgba(0, 0, 0, 0.3);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      html, body {
        width: 100%;
        max-width: 100%;
        overflow-x: hidden;
      }

      html {
        scroll-behavior: smooth;
      }

      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: var(--bg-primary);
        background-image: 
          radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
          radial-gradient(circle at 80% 20%, rgba(255, 107, 157, 0.3) 0%, transparent 50%),
          radial-gradient(circle at 40% 40%, rgba(100, 255, 218, 0.2) 0%, transparent 50%);
        min-height: 100vh;
        color: var(--text-primary);
        line-height: 1.6;
        overflow-x: hidden;
      }

      /* Header Styles */
      .header {
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 1000;
        backdrop-filter: blur(12px);
        background: rgba(15, 15, 35, 0.85);
        border-bottom: 1px solid rgba(100, 255, 218, 0.1);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
      }

      .navbar {
        padding: 0.85rem 0;
      }

      .nav-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 2rem;
      }

      .nav-logo {
        display: flex;
        align-items: center;
        gap: 0.65rem;
        font-size: 1.4rem;
        font-weight: 700;
        color: var(--accent-primary);
        text-decoration: none;
        cursor: pointer;
        transition: transform 0.2s ease;
        flex-shrink: 0;
      }

      .nav-logo:hover {
        transform: scale(1.05);
      }

      .nav-logo i {
        font-size: 1.8rem;
        background: var(--primary-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .nav-menu {
        display: flex;
        gap: 0.25rem;
        list-style: none;
        flex: 1;
        justify-content: center;
      }

      .nav-link {
        color: var(--text-secondary);
        text-decoration: none;
        font-weight: 500;
        font-size: 0.95rem;
        padding: 0.65rem 1.15rem;
        border-radius: 8px;
        transition: all 0.25s ease;
        position: relative;
        display: flex;
        align-items: center;
        gap: 0.4rem;
      }

      .nav-link::after {
        content: '';
        position: absolute;
        bottom: -3px;
        left: 50%;
        width: 0;
        height: 2px;
        background: var(--accent-primary);
        transition: all 0.3s ease;
        transform: translateX(-50%);
      }

      .nav-link:hover {
        color: var(--accent-primary);
        background: rgba(100, 255, 218, 0.08);
      }

      .nav-link:hover::after {
        width: 30px;
      }

      .nav-link.active {
        color: var(--accent-primary);
        background: rgba(100, 255, 218, 0.12);
      }

      .nav-link.active::after {
        width: 30px;
      }

      .nav-actions {
        display: flex;
        gap: 1rem;
        align-items: center;
        margin-left: auto;
      }

      .nav-search {
        display: flex;
        align-items: center;
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(100, 255, 218, 0.15);
        border-radius: 20px;
        padding: 0.45rem 0.85rem;
        transition: all 0.2s ease;
      }

      .nav-search:focus-within {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(100, 255, 218, 0.3);
      }

      .nav-search input {
        background: transparent;
        border: none;
        color: var(--text-primary);
        font-size: 0.9rem;
        outline: none;
        width: 150px;
        padding: 0 0.5rem;
      }

      .nav-search input::placeholder {
        color: var(--text-secondary);
      }

      .nav-search i {
        color: var(--text-secondary);
        font-size: 0.85rem;
        cursor: pointer;
      }

      .nav-icon-btn {
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--text-secondary);
        width: 36px;
        height: 36px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.25s ease;
        position: relative;
        font-size: 1rem;
      }

      .nav-icon-btn:hover {
        background: rgba(100, 255, 218, 0.12);
        color: var(--accent-primary);
        border-color: rgba(100, 255, 218, 0.2);
      }

      .notification-badge {
        position: absolute;
        top: -6px;
        right: -6px;
        background: linear-gradient(135deg, #f5576c, #fa709a);
        color: white;
        font-size: 0.65rem;
        font-weight: 700;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid var(--bg-primary);
      }

      .user-profile {
        display: flex;
        align-items: center;
        gap: 0.9rem;
        cursor: pointer;
        transition: all 0.25s ease;
      }

      .user-profile:hover .profile-img {
        transform: scale(1.08);
      }

      .profile-img {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        border: 2px solid var(--accent-primary);
        object-fit: cover;
        transition: transform 0.25s ease;
      }

      .username {
        font-weight: 500;
        color: var(--text-primary);
        font-size: 0.95rem;
      }

      /* Auth Buttons Styles */
      .auth-buttons {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .auth-btn {
        display: flex;
        align-items: center;
        gap: 0.4rem;
        padding: 0.6rem 1rem;
        border-radius: 10px;
        border: 1px solid rgba(100, 255, 218, 0.3);
        background: rgba(100, 255, 218, 0.08);
        color: var(--accent-primary);
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.25s ease;
        text-decoration: none;
      }

      .auth-btn:hover {
        background: rgba(100, 255, 218, 0.15);
        border-color: var(--accent-primary);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(100, 255, 218, 0.2);
      }

      .auth-btn.login-trigger {
        background: rgba(100, 255, 218, 0.1);
      }

      .auth-btn.signup-trigger {
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-color: transparent;
        color: white;
      }

      .auth-btn.signup-trigger:hover {
        background: linear-gradient(135deg, #7c8cec, #8456a5);
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(102, 126, 234, 0.3);
      }

      .auth-btn.logout-btn {
        background: rgba(255, 107, 157, 0.1);
        border-color: rgba(255, 107, 157, 0.3);
        color: #ff6b9d;
      }

      .auth-btn.logout-btn:hover {
        background: rgba(255, 107, 157, 0.2);
        border-color: #ff6b9d;
      }

      .user-info {
        display: flex;
        align-items: center;
        gap: 0.8rem;
      }

      .nav-toggle {
        display: none;
        flex-direction: column;
        cursor: pointer;
        z-index: 1001;
        gap: 5px;
      }

      .bar {
        width: 24px;
        height: 2.5px;
        background: var(--accent-primary);
        transition: all 0.3s ease;
        border-radius: 2px;
      }

      /* Main Content */
      .main-content {
        padding-top: 100px;
        min-height: 100vh;
      }

      .hero-section {
        text-align: center;
        padding: 3rem 2rem;
        max-width: 800px;
        margin: 0 auto;
        background: linear-gradient(135deg, 
          rgba(100, 255, 218, 0.1) 0%, 
          rgba(15, 15, 35, 0.8) 50%, 
          rgba(26, 26, 46, 0.1) 100%);
        border-radius: 20px;
        position: relative;
        overflow: hidden;
      }

      .hero-section::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, 
          rgba(100, 255, 218, 0.1) 0%, 
          transparent 70%);
        animation: float 6s ease-in-out infinite;
      }

      @keyframes float {
        0%, 100% { transform: translate(0, 0) rotate(0deg); }
        50% { transform: translate(-20px, -20px) rotate(180deg); }
      }

      .hero-title {
        font-size: 3.5rem;
        font-weight: 700;
        background: linear-gradient(135deg, #64ffda 0%, #00b4d8 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 1rem;
        position: relative;
        z-index: 1;
        animation: fadeInUp 1s ease-out;
      }

      .hero-subtitle {
        font-size: 1.2rem;
        color: var(--text-secondary);
        margin-bottom: 2rem;
        animation: fadeInUp 1s ease-out 0.2s both;
        position: relative;
        z-index: 1;
        max-width: 600px;
        margin: 0 auto;
        line-height: 1.8;
      }

      .container {
        width: 100%;
        max-width: 1100px;
        margin: 0 auto;
        padding: 0 2rem;
      }

      /* Balance Card */
      .balance-card {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 2rem;
        text-align: center;
        box-shadow: var(--shadow-glass);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        animation: fadeInUp 1s ease-out 0.4s both;
        position: relative;
        overflow: hidden;
        margin-bottom: 2rem;
      }

      .balance-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #64ffda, #00b4d8);
      }

      .balance-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-hover);
      }

      .balance-header {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
      }

      .balance-header i {
        color: var(--accent-primary);
        font-size: 1.8rem;
      }

      .balance-header h4 {
        color: var(--text-secondary);
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.9rem;
      }

      .balance-amount {
        font-size: 3rem;
        font-weight: 700;
        color: var(--text-primary);
        margin: 1rem 0;
        text-shadow: 0 0 20px rgba(100, 255, 218, 0.3);
      }

      .balance-trend {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .trend-indicator {
        font-size: 1.5rem;
        font-weight: bold;
      }

      .trend-indicator.positive {
        color: var(--success);
      }

      .trend-text {
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      /* Income & Expense Cards */
      .inc-exp-container {
        display: flex;
        width: 100%;
        max-width: 100%;
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .income-card,
      .expense-card {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
        border-radius: 15px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 1.5rem;
        display: flex;
        align-items: center;
        gap: 1rem;
        box-shadow: var(--shadow-glass);
        transition: all 0.3s ease;
        flex: 1;
      }

      .income-card:hover,
      .expense-card:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-hover);
        border-color: rgba(100, 255, 218, 0.2);
      }

      .card-icon {
        width: 60px;
        height: 60px;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        color: white;
      }

      .income-icon {
        background: var(--success-gradient);
      }

      .expense-icon {
        background: var(--warning-gradient);
      }

      .card-content h4 {
        color: var(--text-secondary);
        font-size: 0.9rem;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 0.5rem;
      }

      .money-plus {
        color: var(--success);
        font-size: 1.5rem;
        font-weight: 600;
      }

      .money-minus {
        color: var(--error);
        font-size: 1.5rem;
        font-weight: 600;
      }

      /* History Section */
      .history-section {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 2rem;
        box-shadow: var(--shadow-glass);
        animation: fadeInUp 1s ease-out 0.8s both;
        margin-bottom: 2rem;
      }

      .section-header {
        display: flex;
        flex-direction: column;
        margin-bottom: 1.5rem;
        gap: 1rem;
      }

      .section-header h3 {
        color: var(--text-primary);
        font-size: 1.3rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        border-bottom: none;
        padding-bottom: 0;
        margin: 0;
      }

      .section-header h3 i {
        color: var(--accent-primary);
      }

      .filter-controls {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .search-container {
        position: relative;
        max-width: 300px;
      }

      .search-input {
        width: 100%;
        padding: 0.75rem 1rem 0.75rem 2.5rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 25px;
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        color: var(--text-primary);
        font-size: 0.9rem;
        transition: all 0.3s ease;
      }

      .search-input:focus {
        outline: none;
        border-color: var(--accent-primary);
        box-shadow: 0 0 0 3px rgba(100, 255, 218, 0.1);
      }

      .search-input::placeholder {
        color: var(--text-secondary);
      }

      .search-icon {
        position: absolute;
        left: 0.75rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      .filter-buttons {
        display: flex;
        gap: 0.5rem;
        align-items: center;
        flex-wrap: wrap;
      }

      .advanced-filters {
        display: flex;
        gap: 1rem;
        align-items: center;
        flex-wrap: wrap;
        padding: 1rem;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 15px;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .category-select,
      .date-input,
      .amount-input {
        padding: 0.75rem 1rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        color: var(--text-primary);
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 120px;
      }

      .category-select:focus,
      .date-input:focus,
      .amount-input:focus {
        outline: none;
        border-color: var(--accent-primary);
        background: rgba(100, 255, 218, 0.1);
      }

      .category-select option {
        background: var(--bg-secondary);
        color: var(--text-primary);
      }

      .date-filters,
      .amount-filters {
        display: flex;
        gap: 0.5rem;
        align-items: center;
      }

      .date-input,
      .amount-input {
        cursor: text;
      }

      .amount-input::placeholder,
      .date-input::placeholder {
        color: var(--text-secondary);
      }

      .clear-filters-btn {
        padding: 0.75rem 1.5rem;
        background: rgba(255, 87, 34, 0.2);
        color: var(--error);
        border: 1px solid rgba(255, 87, 34, 0.3);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .clear-filters-btn:hover {
        background: rgba(255, 87, 34, 0.3);
        border-color: var(--error);
      }

      .filter-btn {
        padding: 0.75rem 1.5rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        background: transparent;
        color: var(--text-secondary);
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.9rem;
        font-weight: 500;
      }

      .filter-btn:hover,
      .filter-btn.active {
        background: var(--accent-primary);
        color: var(--bg-primary);
        border-color: var(--accent-primary);
      }

      .list {
        list-style: none;
        padding: 0;
        max-height: 400px;
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: var(--accent-primary) transparent;
      }

      .list::-webkit-scrollbar {
        width: 8px;
      }

      .list::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
      }

      .list::-webkit-scrollbar-thumb {
        background: var(--accent-primary);
        border-radius: 4px;
      }

      .list li {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 1rem;
        margin-bottom: 0.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
        transition: all 0.3s ease;
        animation: slideInLeft 0.3s ease-out;
        max-width: 100%;
        word-break: break-word;
      }

      .list li:hover {
        transform: translateX(5px);
        background: rgba(255, 255, 255, 0.1);
      }

      .list li.plus {
        border-left: 4px solid var(--success);
      }

      .list li.minus {
        border-left: 4px solid var(--error);
      }

      .delete-btn {
        position: absolute;
        left: -40px;
        top: 50%;
        transform: translateY(-50%);
        background: var(--error);
        color: white;
        border: none;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        cursor: pointer;
        opacity: 0;
        transition: all 0.3s ease;
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .list li:hover .delete-btn {
        opacity: 1;
      }

      .delete-btn:hover {
        background: #d32f2f;
        transform: translateY(-50%) scale(1.1);
      }

      /* Data Management Section */
      .data-management-section {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 2rem;
        box-shadow: var(--shadow-glass);
        animation: fadeInUp 1s ease-out 0.9s both;
        margin-bottom: 2rem;
      }

      .data-management-section h3 {
        color: var(--text-primary);
        font-size: 1.3rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
      }

      .data-management-section h3 i {
        color: var(--accent-primary);
      }

      .data-actions {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
      }

      .export-section,
      .import-section {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .export-section h4,
      .import-section h4 {
        color: var(--text-secondary);
        font-size: 1rem;
        font-weight: 500;
        margin-bottom: 0.5rem;
      }

      .export-buttons {
        display: flex;
        gap: 1rem;
      }

      .export-btn {
        padding: 0.75rem 1.5rem;
        background: var(--success-gradient);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .export-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(76, 175, 80, 0.3);
      }

      .import-controls {
        display: flex;
        gap: 1rem;
        align-items: center;
      }

      .file-input {
        display: none;
      }

      .file-label {
        padding: 0.75rem 1.5rem;
        background: rgba(255, 255, 255, 0.1);
        color: var(--text-primary);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.9rem;
        font-weight: 500;
      }

      .file-label:hover {
        background: rgba(255, 255, 255, 0.15);
        border-color: var(--accent-primary);
      }

      .import-btn {
        padding: 0.75rem 1.5rem;
        background: var(--primary-gradient);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .import-btn:disabled {
        background: rgba(255, 255, 255, 0.1);
        color: var(--text-secondary);
        cursor: not-allowed;
      }

      .import-btn:not(:disabled):hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
      }

      .import-options {
        margin-top: 1rem;
      }

      .checkbox-label {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        color: var(--text-secondary);
        font-size: 0.9rem;
        cursor: pointer;
      }

      .checkbox-label input[type="checkbox"] {
        width: 18px;
        height: 18px;
        accent-color: var(--accent-primary);
      }

      /* Form Section */
      .form-section {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 2rem;
        box-shadow: var(--shadow-glass);
        animation: fadeInUp 1s ease-out 1s both;
      }

      .form-section h3 {
        color: var(--text-primary);
        font-size: 1.3rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
        border-bottom: none;
        padding-bottom: 0;
      }

      .form-section h3 i {
        color: var(--accent-primary);
      }

      .transaction-form {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
      }

      .form-control {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .form-control label {
        color: var(--text-secondary);
        font-weight: 500;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .form-control input {
        padding: 1rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        color: var(--text-primary);
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .form-control input:focus {
        outline: none;
        border-color: var(--accent-primary);
        box-shadow: 0 0 0 3px rgba(100, 255, 218, 0.1);
      }

      .form-control input::placeholder {
        color: var(--text-secondary);
      }

      .form-control select {
        padding: 1rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        color: var(--text-primary);
        font-size: 1rem;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .form-control select:focus {
        outline: none;
        border-color: var(--accent-primary);
        box-shadow: 0 0 0 3px rgba(100, 255, 218, 0.1);
      }

      .form-control select option {
        background: var(--bg-secondary);
        color: var(--text-primary);
        padding: 0.5rem;
      }

      .form-control small {
        color: var(--text-secondary);
        font-size: 0.8rem;
        font-style: italic;
        margin-top: 0.25rem;
      }

      .btn-submit {
        padding: 1rem 2rem;
        background: var(--primary-gradient);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .btn-submit:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
      }

      .btn-submit:active {
        transform: translateY(0);
      }

      /* Footer */
      .footer {
        background: rgba(15, 15, 35, 0.9);
        backdrop-filter: blur(20px);
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        padding: 3rem 0 1rem;
        margin-top: 4rem;
      }

      .footer-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 2rem;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
      }

      .footer-section {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .footer-logo {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--accent-primary);
        margin-bottom: 0.5rem;
      }

      .footer-logo i {
        font-size: 2rem;
        background: var(--primary-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .footer-section p {
        color: var(--text-secondary);
        line-height: 1.6;
      }

      .footer-section h4 {
        color: var(--text-primary);
        font-weight: 600;
        margin-bottom: 0.5rem;
      }

      .footer-links {
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .footer-links a {
        color: var(--text-secondary);
        text-decoration: none;
        transition: color 0.3s ease;
      }

      .footer-links a:hover {
        color: var(--accent-primary);
      }

      .social-links {
        display: flex;
        gap: 1rem;
      }

      .social-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        color: var(--text-secondary);
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .social-link:hover {
        background: var(--accent-primary);
        color: var(--bg-primary);
        transform: translateY(-2px);
      }

      .footer-bottom {
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        margin-top: 2rem;
        padding-top: 1rem;
      }

      .footer-bottom .footer-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
        grid-template-columns: 1fr;
      }

      .footer-bottom p {
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      .footer-stats {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
      }

      .footer-stats span {
        font-size: 0.8rem;
        color: var(--text-secondary);
        background: rgba(255, 255, 255, 0.05);
        padding: 0.25rem 0.75rem;
        border-radius: 15px;
      }

      /* Animations */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideInLeft {
        from {
          opacity: 0;
          transform: translateX(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes pulse {
        0%, 100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      /* Transaction Display Improvements */
      .transaction-content {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        flex: 1;
      }

      .transaction-main {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .transaction-text {
        font-weight: 500;
        color: var(--text-primary);
      }

      .transaction-amount {
        font-weight: 600;
        font-size: 1.1rem;
      }

      .transaction-date {
        font-size: 0.8rem;
        color: var(--text-secondary);
        opacity: 0.7;
      }

      .transaction-category {
        font-size: 0.8rem;
        color: var(--accent-primary);
        background: rgba(100, 255, 218, 0.1);
        padding: 0.2rem 0.6rem;
        border-radius: 15px;
        margin-top: 0.25rem;
        display: inline-block;
      }

      /* Balance Card States */
      .balance-card.positive .balance-amount {
        color: var(--success);
        text-shadow: 0 0 20px rgba(0, 230, 118, 0.3);
      }

      .balance-card.negative .balance-amount {
        color: var(--error);
        text-shadow: 0 0 20px rgba(255, 87, 34, 0.3);
      }

      .balance-card.neutral .balance-amount {
        color: var(--text-secondary);
        text-shadow: none;
      }

      /* PWA Install Prompt */
      .install-prompt {
        position: fixed;
        bottom: 20px;
        left: 20px;
        right: 20px;
        z-index: 10000;
        animation: slideInUp 0.3s ease-out;
        display: none;
      }

      .install-prompt-content {
        background: rgba(15, 15, 35, 0.95);
        backdrop-filter: blur(20px);
        border-radius: 15px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 1.5rem;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }

      .install-prompt-header {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 0.75rem;
      }

      .install-prompt-header i {
        color: var(--accent-primary);
        font-size: 1.5rem;
      }

      .install-prompt-header h3 {
        color: var(--text-primary);
        font-size: 1.1rem;
        font-weight: 600;
        margin: 0;
      }

      .install-prompt p {
        color: var(--text-secondary);
        margin-bottom: 1rem;
        font-size: 0.9rem;
      }

      .install-prompt-actions {
        display: flex;
        gap: 1rem;
      }

      .install-btn {
        padding: 0.75rem 1.5rem;
        background: var(--primary-gradient);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        flex: 1;
        justify-content: center;
      }

      .install-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      }

      .dismiss-btn {
        padding: 0.75rem 1.5rem;
        background: transparent;
        color: var(--text-secondary);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 8px;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        justify-content: center;
      }
.glass {
  background: rgba(255, 255, 255, 0.04);
  backdrop-filter: blur(12px);
  border-radius: 18px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
  animation: fadeIn 0.8s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(14px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

      .dismiss-btn:hover {
        background: rgba(255, 255, 255, 0.1);
        color: var(--text-primary);
      }

      /* Offline Indicator */
      .offline-indicator {
        position: fixed;
        top: 80px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(255, 152, 0, 0.9);
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 25px;
        font-size: 0.9rem;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        z-index: 9999;
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 20px rgba(255, 152, 0, 0.3);
        animation: slideInDown 0.3s ease-out;
        display: none;
      }

      /* Update Notification */
      .update-notification {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 10000;
        animation: slideInRight 0.3s ease-out;
        display: none;
      }

      .update-content {
        background: rgba(76, 175, 80, 0.9);
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 10px;
        display: flex;
        align-items: center;
        gap: 1rem;
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 20px rgba(76, 175, 80, 0.3);
      }

      .update-btn {
        background: white;
        color: #4CAF50;
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 5px;
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .update-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }

      /* Animations */
      @keyframes slideInUp {
        from {
          transform: translateY(100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes slideInDown {
        from {
          transform: translateX(-50%) translateY(-100%);
          opacity: 0;
        }
        to {
          transform: translateX(-50%) translateY(0);
          opacity: 1;
        }
      }

      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      /* Responsive Design */
      @media (max-width: 1024px) {
        .nav-toggle {
          display: flex;
        }

        .nav-actions {
          display: none;
        }
        
        .nav-menu {
          position: fixed;
          top: 0;
          left: -100%;
          width: 80%;
          height: 100vh;
          background: rgba(15, 15, 35, 0.95);
          backdrop-filter: blur(20px);
          flex-direction: column;
          justify-content: flex-start;
          align-items: center;
          padding: 6rem 0 2rem;
          transition: left 0.3s ease;
          gap: 0;
          border-right: 1px solid rgba(255, 255, 255, 0.1);
          flex: unset;
        }
        
        .nav-menu.active {
          left: 0;
        }
        
        .nav-link {
          font-size: 1.1rem;
          padding: 0.9rem 1.8rem;
          width: 100%;
          text-align: center;
          margin: 0.35rem 0;
          border-radius: 12px;
        }

        .nav-link::after {
          display: none;
        }
        
        .user-profile {
          display: none;
        }
        
        .nav-toggle.active .bar:nth-child(2) {
          opacity: 0;
        }
        
        .nav-toggle.active .bar:nth-child(1) {
          transform: translateY(8px) rotate(45deg);
        }
        
        .nav-toggle.active .bar:nth-child(3) {
          transform: translateY(-8px) rotate(-45deg);
        }
      }

      @media (max-width: 768px) {
        .navbar {
          padding: 0.65rem 0;
        }

        .nav-container {
          padding: 0 1rem;
        }

        .nav-logo {
          font-size: 1.2rem;
          gap: 0.4rem;
        }

        .nav-logo i {
          font-size: 1.5rem;
        }

        .hero-title {
          font-size: 2.5rem;
        }
        
        .container {
          padding: 0 1rem;
        }
        
        .inc-exp-container {
          flex-direction: column;
        }
        
        .form-row {
          grid-template-columns: 1fr;
        }
        
        .section-header {
          flex-direction: column;
          align-items: stretch;
        }
        
        .footer-bottom .footer-container {
          flex-direction: column;
          text-align: center;
        }
        
        .footer-stats {
          justify-content: center;
        }
        
        .data-actions {
          grid-template-columns: 1fr;
          gap: 1.5rem;
        }
        
        .advanced-filters {
          flex-direction: column;
          align-items: stretch;
        }
        
        .date-filters,
        .amount-filters {
          justify-content: stretch;
        }

        /* Auth buttons mobile styles */
        .auth-buttons {
          gap: 0.3rem;
        }

        .auth-btn {
          padding: 0.5rem 0.8rem;
          font-size: 0.85rem;
        }

        .auth-btn span {
          display: none;
        }

        .auth-btn i {
          font-size: 1rem;
        }

        .user-info {
          gap: 0.5rem;
        }

        .user-info .username {
          display: none;
        }

        .profile-img {
          width: 32px;
          height: 32px;
        }
      }
.balance-card,
.income-card,
.expense-card,
.history-section,
.form-section,
.data-management-section,
.recurring-section {
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.balance-card:hover,
.income-card:hover,
.expense-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.45);
}
.btn-submit {
  background: linear-gradient(135deg, #64ffda, #48e0c1);
  border: none;
  color: #041212;
  font-weight: 600;
  border-radius: 14px;
  padding: 0.85rem 1.5rem;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.btn-submit:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(100, 255, 218, 0.35);
}

      @media (max-width: 480px) {
        .hero-title {
          font-size: 2rem;
        }
        
        .hero-subtitle {
          font-size: 1rem;
        }
        
        .balance-amount {
          font-size: 2rem;
        }
        
        .income-card,
        .expense-card {
          flex-direction: column;
          text-align: center;
          padding: 1rem;
        }
        
        .card-icon {
          width: 50px;
          height: 50px;
          margin-bottom: 0.5rem;
        }
        
        .nav-container {
          padding: 0 1rem;
        }
        
        .list li {
          flex-direction: column;
          align-items: flex-start;
          gap: 0.25rem;
        }
        
        .delete-btn {
          position: relative;
          left: 0;
          top: 0;
          transform: none;
          margin-top: 0.5rem;
          opacity: 1;
          width: 100%;
          border-radius: 8px;
          height: 40px;
        }
        
        .date-input,
        .amount-input,
        .category-select {
          width: 100%;
        }
      }
</style>

<style>
    /* =========================
   MOBILE RESPONSIVE STYLES
   ========================= */
@media (max-width: 768px) {

  /* General */
  body {
    overflow-x: hidden;
  }

  .container {
    padding: 1rem;
  }

  /* Navbar */
  .nav-menu {
    position: absolute;
    top: 70px;
    left: 0;
    width: 100%;
    background: #0f0f23;
    flex-direction: column;
    align-items: center;
    display: none;
  }

  .nav-menu.active {
    display: flex;
  }

  .nav-link {
    padding: 1rem;
    width: 100%;
    text-align: center;
  }

  .nav-toggle {
    display: block;
    cursor: pointer;
  }

  .user-profile {
    display: none;
  }

  /* Hero */
  .hero-title {
    font-size: 1.8rem;
    text-align: center;
  }

  .hero-subtitle {
    text-align: center;
    font-size: 1rem;
  }

  /* Balance & Cards */
  /* Styles moved to expensetracker.css */


  /* Filters */
  .filter-controls {
    flex-direction: column;
    gap: 0.75rem;
  }

  .advanced-filters {
    flex-direction: column;
  }

  .date-filters,
  .amount-filters {
    flex-direction: column;
    width: 100%;
  }

  /* Transaction Form */
  .form-row {
    flex-direction: column;
  }

  .form-control {
    width: 100%;
  }

  /* Footer */
  .footer-container {
    flex-direction: column;
    gap: 2rem;
    text-align: center;
  }

  .footer-stats {
    flex-direction: column;
    gap: 0.5rem;
  }
}
</style>

</head>
<body>
  <!-- Header -->
  <header class="header">
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-logo">
          <i class="fas fa-wallet"></i>
          <span>ExpenseFlow</span>
        </div>
        <div class="nav-menu" id="nav-menu">
          <a href="#dashboard" class="nav-link active">Dashboard</a>
          <a href="#analytics" class="nav-link">Analytics</a>
          <a href="#goals" class="nav-link">Goals</a>
          <a href="#settings" class="nav-link">Settings</a>
          <a href="login-signup.html" class="nav-link">Login / Sign up</a>
        </div>
        <div class="nav-toggle" id="nav-toggle">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </div>
        <div class="user-profile">
          <button class="currency-btn" onclick="openCurrencyModal()" title="Currency Settings">
            <i class="fas fa-coins"></i>
            <span id="current-currency">INR</span>
          </button>
          <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=50&h=50&fit=crop&crop=face"
            alt="User" class="profile-img">
          <span class="username">John Doe</span>
        </div>
      </div>
    </nav>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <div class="hero-section glass">
      <h1 class="hero-title">Smart Money Management</h1>
      <p class="hero-subtitle">Take control of your finances with our intuitive expense tracker</p>
    </div>
  /* Authentication Styles - Premium UI */
  .auth-prompt {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 50% 50%, #1a1a3e 0%, #0f0f23 100%);
    backdrop-filter: blur(15px);
    z-index: 2500;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    animation: fadeIn 0.5s ease-out;
  }
  
  .auth-prompt.show {
    display: flex;
  }
  
  .auth-prompt-content {
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(25px);
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: 28px;
    padding: 3.5rem 3rem;
    max-width: 520px;
    width: 100%;
    text-align: center;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    animation: fadeInUp 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  }
  
  .auth-prompt-icon {
    width: 90px;
    height: 90px;
    background: linear-gradient(135deg, #64ffda 0%, #764ba2 100%);
    border-radius: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 2rem;
    font-size: 2.5rem;
    color: white;
    box-shadow: 0 10px 30px rgba(100, 255, 218, 0.3);
    transform: rotate(-5deg);
    animation: pulse 2s infinite ease-in-out;
  }
  
  .auth-prompt h2 {
    font-size: 2.4rem;
    font-weight: 800;
    margin-bottom: 1rem;
    background: linear-gradient(to right, #fff, #64ffda);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  .auth-prompt p {
    color: #b4b4d0;
    font-size: 1.1rem;
    line-height: 1.7;
    margin-bottom: 2.5rem;
  }
  
  .auth-prompt-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
    margin-bottom: 3rem;
  }
  
  .auth-prompt-btn {
    padding: 1rem 2.5rem;
    border-radius: 14px;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
    border: none;
  }
  
  .auth-prompt-btn.primary {
    background: #64ffda;
    color: #0f0f23;
    box-shadow: 0 4px 15px rgba(100, 255, 218, 0.4);
  }
  
  .auth-prompt-btn.primary:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 8px 25px rgba(100, 255, 218, 0.5);
  }
  
  .auth-prompt-btn.secondary {
    background: rgba(255, 255, 255, 0.05);
    color: #fff;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .auth-prompt-btn.secondary:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-5px);
  }
  
  .auth-prompt-features {
    text-align: left;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 20px;
    padding: 1.5rem 2rem;
    border: 1px solid rgba(100, 255, 218, 0.1);
  }
  
  .auth-prompt-features h4 {
    font-size: 0.9rem;
    color: #64ffda;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 1rem;
    text-align: center;
  }
  
  .auth-prompt-features ul {
    list-style: none;
    padding: 0;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }
  
  .auth-prompt-features li {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.95rem;
    color: #d1d1f0;
  }
  
  .auth-prompt-features li i {
    color: #64ffda;
    font-size: 1rem;
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1) rotate(-5deg); }
    50% { transform: scale(1.05) rotate(0deg); }
  }

  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(40px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Modals - Premium Glow */
  .login-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(10, 10, 25, 0.85);
    backdrop-filter: blur(20px);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 3000;
  }
  
  .login-modal-overlay.active {
    display: flex;
    animation: fadeIn 0.4s ease-out;
  }
  
  .login-modal {
    background: rgba(26, 26, 46, 0.95);
    border-radius: 32px;
    padding: 3rem;
    max-width: 450px;
    width: 95%;
    border: 1px solid rgba(100, 255, 218, 0.25);
    color: white;
    box-shadow: 0 0 50px rgba(100, 255, 218, 0.15);
    position: relative;
    animation: modalSlideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1);
  }
  
  @keyframes modalSlideUp {
    from { opacity: 0; transform: translateY(100px) scale(0.9); }
    to { opacity: 1; transform: translateY(0) scale(1); }
  }

  .login-modal-close {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    background: rgba(255, 255, 255, 0.05);
    border: none;
    color: #fff;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.2s;
  }

  .login-modal-close:hover {
    background: rgba(255, 107, 157, 0.2);
    color: #ff6b9d;
    transform: rotate(90deg);
  }
  
  .login-modal h2 {
    font-size: 2rem;
    text-align: center;
    margin-bottom: 2rem;
  }

  .protected-content {
    transition: filter 0.5s, opacity 0.5s;
  }
  
  body.modal-active .protected-content {
    filter: blur(10px);
    opacity: 0.3;
  }
  
  .login-modal .form-group { margin-bottom: 1.5rem; }
  .login-modal label { display: block; margin-bottom: 0.75rem; color: #64ffda; font-weight: 500; font-size: 0.9rem; letter-spacing: 0.5px;}
  .login-modal input { 
    width: 100%; 
    padding: 1.1rem; 
    border-radius: 14px; 
    background: rgba(255,255,255,0.03); 
    border: 1px solid rgba(255,255,255,0.1); 
    color: white; 
    font-size: 1rem;
    transition: all 0.3s;
  }
  
  .login-modal input:focus {
    outline: none;
    background: rgba(100, 255, 218, 0.05);
    border-color: #64ffda;
    box-shadow: 0 0 0 4px rgba(100, 255, 218, 0.1);
  }

  .login-btn {
    width: 100%;
    padding: 1.1rem;
    background: linear-gradient(135deg, #64ffda 0%, #3dcfad 100%);
    border: none;
    border-radius: 14px;
    color: #0f0f23;
    font-weight: 800;
    font-size: 1rem;
    cursor: pointer;
    margin-top: 1rem;
    transition: all 0.3s;
    box-shadow: 0 10px 20px rgba(100, 255, 218, 0.2);
  }

  .login-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 30px rgba(100, 255, 218, 0.3);
  }

  .login-signup-link {
    text-align: center;
    margin-top: 1.5rem;
    color: #b4b4d0;
    font-size: 0.9rem;
  }

  .login-signup-link a {
    color: #64ffda;
    text-decoration: none;
    font-weight: 700;
  }
    /* =========================
   MOBILE RESPONSIVE STYLES
   ========================= */
@media (max-width: 768px) {

  /* General */
  body {
    overflow-x: hidden;
  }

      .chatbot-close-btn:hover {
        transform: scale(1.2);
      }

      .chatbot-messages {
        flex: 1;
        overflow-y: auto;
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .chatbot-messages::-webkit-scrollbar {
        width: 6px;
      }

      .chatbot-messages::-webkit-scrollbar-track {
        background: transparent;
      }

      .chatbot-messages::-webkit-scrollbar-thumb {
        background: rgba(100, 255, 218, 0.3);
        border-radius: 3px;
      }

      .chatbot-messages::-webkit-scrollbar-thumb:hover {
        background: rgba(100, 255, 218, 0.5);
      }

      .chatbot-message {
        display: flex;
        animation: fadeIn 0.3s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .bot-message {
        justify-content: flex-start;
      }

      .user-message {
        justify-content: flex-end;
      }

      .message-content {
        max-width: 75%;
        padding: 0.75rem 1rem;
        border-radius: 12px;
        word-wrap: break-word;
      }

      .bot-message .message-content {
        background: rgba(100, 255, 218, 0.1);
        border: 1px solid rgba(100, 255, 218, 0.2);
        color: var(--text-primary);
      }

      .user-message .message-content {
        background: var(--primary-gradient);
        color: white;
      }

      .message-content p {
        margin: 0;
        font-size: 0.95rem;
        line-height: 1.4;
      }

      .chatbot-input-area {
        padding: 1rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        background: rgba(0, 0, 0, 0.2);
      }

      .chatbot-form {
        display: flex;
        gap: 0.5rem;
      }

      .chatbot-input {
        flex: 1;
        padding: 0.75rem 1rem;
        border: 1px solid rgba(100, 255, 218, 0.2);
        border-radius: 20px;
        background: rgba(255, 255, 255, 0.05);
        color: var(--text-primary);
        font-size: 0.9rem;
        outline: none;
        transition: all 0.2s;
      }

      .chatbot-input:focus {
        border-color: var(--accent-primary);
        background: rgba(100, 255, 218, 0.1);
        box-shadow: 0 0 10px rgba(100, 255, 218, 0.2);
      }

      .chatbot-input::placeholder {
        color: rgba(180, 180, 180, 0.6);
      }

      .chatbot-send-btn {
        width: 40px;
        height: 40px;
        border: none;
        border-radius: 50%;
        background: var(--primary-gradient);
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.9rem;
        transition: all 0.2s;
      }

      .chatbot-send-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
      }

      .chatbot-send-btn:active {
        transform: scale(0.95);
      }

      .chatbot-toggle-btn {
        width: 60px;
        height: 60px;
        border: none;
        border-radius: 50%;
        background: var(--primary-gradient);
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
        position: relative;
      }

      .chatbot-toggle-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
      }

      .chatbot-toggle-btn.hidden {
        display: none;
      }

      /* Responsive Design */
      @media (max-width: 480px) {
        .chatbot-widget {
          width: calc(100vw - 40px);
          height: 70vh;
          max-height: 500px;
        }

        .chatbot-container {
          bottom: 10px;
          left: 10px;
          right: 10px;
        }

        .message-content {
          max-width: 85%;
        }
      }
  .container {
    padding: 1rem;
  }

  /* Navbar */
  .nav-menu {
    position: absolute;
    top: 70px;
    left: 0;
    width: 100%;
    background: #0f0f23;
    flex-direction: column;
    align-items: center;
    display: none;
  }

  .nav-menu.active {
    display: flex;
  }

  .nav-link {
    padding: 1rem;
    width: 100%;
    text-align: center;
  }

  .nav-toggle {
    display: block;
    cursor: pointer;
  }

  .user-profile {
    display: none;
  }

  /* Hero */
  .hero-title {
    font-size: 1.8rem;
    text-align: center;
  }

  .hero-subtitle {
    text-align: center;
    font-size: 1rem;
  }

  /* Balance & Cards */
  /* Styles moved to expensetracker.css */


  /* Filters */
  .filter-controls {
    flex-direction: column;
    gap: 0.75rem;
  }

  .advanced-filters {
    flex-direction: column;
  }

  .date-filters,
  .amount-filters {
    flex-direction: column;
    width: 100%;
  }

  /* Transaction Form */
  .form-row {
    flex-direction: column;
  }

  .form-control {
    width: 100%;
  }

  /* Footer */
  .footer-container {
    flex-direction: column;
    gap: 2rem;
    text-align: center;
  }

  .footer-stats {
    flex-direction: column;
    gap: 0.5rem;
  }
}

      /* Cursor Trail Styles */
  .cursor-trail-container {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 999999;
  }

  .trail-dot {
    position: absolute;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: linear-gradient(135deg, #64ffda 0%, #00b4d8 100%);
    box-shadow: 
      0 0 15px rgba(100, 255, 218, 0.8),
      0 0 30px rgba(100, 255, 218, 0.4);
    transform: translate(-50%, -50%);
    will-change: transform, opacity;
    mix-blend-mode: screen;
    transition: opacity 0.3s ease, transform 0.3s ease;
  }

  .trail-dot:first-child {
    width: 12px;
    height: 12px;
    background: linear-gradient(135deg, #64ffda 0%, #00b4d8 100%);
    box-shadow: 
      0 0 20px rgba(100, 255, 218, 0.9),
      0 0 40px rgba(100, 255, 218, 0.6);
    z-index: 2;
  }

<body>
  <!-- Header -->
  <header class="header">
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-logo">
          <i class="fas fa-wallet"></i>
          <span>ExpenseFlow</span>
        </div>
        <div class="nav-menu" id="nav-menu">
          <a href="#dashboard" class="nav-link active">Dashboard</a>
          <a href="#analytics" class="nav-link">Analytics</a>
          <a href="#goals" class="nav-link">Goals</a>
          <a href="#settings" class="nav-link">Settings</a>
          <!-- Theme Toggle -->
          <button id="theme-toggle" class="theme-toggle-btn">
            
          </button>

        </div>
        <div class="nav-toggle" id="nav-toggle">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </div>
        <div class="user-profile">
          <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=50&h=50&fit=crop&crop=face"
            alt="User" class="profile-img">
          <span class="username">John Doe</span>
        </div>
      </div>
    </nav>
  </header>
  .cursor-clicking {
    transform: translate(-50%, -50%) scale(1.5);
    background: linear-gradient(135deg, #ff6b9d 0%, #ffcc00 100%) !important;
    box-shadow: 
      0 0 25px rgba(255, 107, 157, 0.9),
      0 0 50px rgba(255, 107, 157, 0.6) !important;
  }

  .cursor-hovering {
    transform: translate(-50%, -50%) scale(1.3);
    background: linear-gradient(135deg, #00b4d8 0%, #64ffda 100%) !important;
  }

  /* Global Loader Styles */
  .global-loader {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(15, 15, 35, 0.9);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .global-loader.hidden {
    display: none;
  }

  .spinner {
    width: 40px;
    height: 40px;
    border: 3px solid rgba(100, 255, 218, 0.3);
    border-top: 3px solid #64ffda;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
    </style>
  </head>
  <body>

<div class="cursor-trail-container" id="cursor-trail"></div>

<script>
(function() {
  // Hide default cursor
  document.body.style.cursor = 'none';
  
  const container = document.getElementById('cursor-trail');
  const coords = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
  const trailCircles = [];
  const COUNT = 12; // Fewer circles for smoother trail
  
  // Create trail circles
  for (let i = 0; i < COUNT; i++) {
    const circle = document.createElement('div');
    circle.className = 'trail-dot';
    
    // Opacity decreases along the trail
    const opacity = 0.9 - (i / COUNT) * 0.8;
    circle.style.opacity = opacity.toString();
    
    // Size decreases along the trail
    const scale = 1 - (i / COUNT) * 0.5;
    circle.style.transform = `translate(-50%, -50%) scale(${scale})`;
    
    container.appendChild(circle);
    trailCircles.push({ 
      element: circle, 
      x: coords.x, 
      y: coords.y,
      targetX: coords.x,
      targetY: coords.y
    });
  }
  
  // Track mouse position
  let isMoving = false;
  let lastMouseX = coords.x;
  let lastMouseY = coords.y;
  let velocity = { x: 0, y: 0 };
  
  window.addEventListener('mousemove', e => {
    coords.x = e.clientX;
    coords.y = e.clientY;
    
    // Calculate velocity for smooth movement
    velocity.x = e.clientX - lastMouseX;
    velocity.y = e.clientY - lastMouseY;
    lastMouseX = e.clientX;
    lastMouseY = e.clientY;
    
    isMoving = true;
    
    // Reset movement timeout
    clearTimeout(window.movementTimeout);
    window.movementTimeout = setTimeout(() => {
      isMoving = false;
    }, 50);
  });
  
  // Click effect
  window.addEventListener('mousedown', () => {
    trailCircles.forEach(circle => {
      circle.element.classList.add('cursor-clicking');
    });
  });
  
  window.addEventListener('mouseup', () => {
    trailCircles.forEach(circle => {
      circle.element.classList.remove('cursor-clicking');
    });
  });
  
  // Hover effect for interactive elements
  window.addEventListener('mouseover', e => {
    const interactive = e.target.closest('a, button, input, select, textarea, [role="button"]');
    trailCircles.forEach(circle => {
      circle.element.classList.toggle('cursor-hovering', !!interactive);
    });
  });
  
  // Smooth animation function
  function animateTrail() {
    let targetX = coords.x;
    let targetY = coords.y;
    
    // Add velocity offset to first circle for more natural feel
    const velocityOffset = 0.5;
    const offsetX = velocity.x * velocityOffset;
    const offsetY = velocity.y * velocityOffset;
    
    trailCircles.forEach((circle, index) => {
      // First circle follows cursor exactly
      if (index === 0) {
        circle.x = targetX + offsetX;
        circle.y = targetY + offsetY;
      } 
      // Other circles follow with smooth delay
      else {
        const prevCircle = trailCircles[index - 1];
        
        // Smooth interpolation factor (changes based on movement speed)
        const speed = Math.sqrt(velocity.x * velocity.x + velocity.y * velocity.y);
        const lerpFactor = isMoving ? 
          Math.min(0.3 + (speed * 0.01), 0.5) :  // Faster movement = tighter trail
          0.1; // Slow movement = more spread
        
        circle.x += (prevCircle.x - circle.x) * lerpFactor;
        circle.y += (prevCircle.y - circle.y) * lerpFactor;
      }
      
      // Apply position with easing
      circle.element.style.left = circle.x + 'px';
      circle.element.style.top = circle.y + 'px';
      
      // Dynamic opacity based on speed and position
      if (index > 0) {
        const speed = Math.sqrt(velocity.x * velocity.x + velocity.y * velocity.y);
        const baseOpacity = 0.9 - (index / COUNT) * 0.8;
        const speedMultiplier = Math.min(1 + speed * 0.02, 1.5);
        circle.element.style.opacity = (baseOpacity * speedMultiplier).toString();
      }
      
      // Update target for next circle
      targetX = circle.x;
      targetY = circle.y;
    });
    
    requestAnimationFrame(animateTrail);
  }
  
  // Handle window resize
  window.addEventListener('resize', () => {
    // Adjust if cursor goes out of bounds
    if (coords.x > window.innerWidth) coords.x = window.innerWidth;
    if (coords.y > window.innerHeight) coords.y = window.innerHeight;
  });
  
  // Handle mouse leave/enter
  window.addEventListener('mouseleave', () => {
    trailCircles.forEach(circle => {
      circle.element.style.opacity = '0';
    });
  });
  
  window.addEventListener('mouseenter', () => {
    trailCircles.forEach((circle, index) => {
      const opacity = 0.9 - (index / COUNT) * 0.8;
      circle.element.style.opacity = opacity.toString();
    });
  });
  
  // Start animation
  animateTrail();
})();
</script>

      
    <!-- Global Loader -->
<div id="global-loader" class="global-loader hidden">
  <div class="spinner"></div>
</div>

    <!-- Protected Content Wrapper -->
    <div id="protectedContent" class="protected-content">
    <!-- Header -->
    <header class="header">
      <nav class="navbar">
        <div class="nav-container">
          <a href="#" class="nav-logo">
            <i class="fas fa-wallet"></i>
            <span>ExpenseFlow</span>
          </a>
          <div class="nav-menu" id="nav-menu">
            <a href="#dashboard" class="nav-link active">Dashboard</a>
            <a href="analytics.html" class="nav-link">Analytics</a>
            <a href="public/analytics.html" class="nav-link">Analytics</a>
            <a href="#analytics" class="nav-link">Analytics</a>
            <a href="#health" class="nav-link" id="health-tab">Health</a>
            <a href="#goals" class="nav-link">Goals</a>
            <a href="#settings" class="nav-link">Settings</a>
            <a href="login-signup.html" class="nav-link">Login-Signup</a>
          </div>
          
          <div class="nav-actions">
            <div class="nav-search">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Search transactions...">
            </div>
            <button class="nav-icon-btn" title="Notifications">
              <i class="fas fa-bell"></i>
              <span class="notification-badge">2</span>
            </button>
          </div>
          <div class="nav-toggle" id="nav-toggle">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
            <span><a href="index.html" class="nav-link">ExpenseFlow</a></span>
          </div>
          <div class="card-content">
            <h4>Income</h4>
            <p id="money-plus" class="money-plus">
              +&#8377;0.00
            </p>
          </div>
        </div>
        <div class="expense-card">
          <div class="card-icon expense-icon">
            <i class="fas fa-arrow-down"></i>
          </div>
          <button id="theme-toggle-btn" class="theme-toggle-btn dark-mode" title="Switch to Light Mode">
            <i class="fas fa-sun"></i>
          </button>
          <div class="user-profile">
            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=50&h=50&fit=crop&crop=face" alt="User" class="profile-img">
            <span class="username" id="navUsername">User</span>
            <div id="userInfo" class="user-info" style="display: none;">
              <button class="auth-btn logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
              </button>
            </div>
          <div class="card-content">
            <h4>Expense</h4>
            <p id="money-minus" class="money-minus">
              -&#8377;0.00
            </p>
          </div>
        </div>
      </div>

      <!-- Transaction History -->
      <div class="history-section">
        <div class="section-header">
          <h3><i class="fas fa-history"></i> Transaction History</h3>
          <div class="filter-controls">
            <div class="search-container">
              <input type="text" id="search-input" placeholder="Search transactions..." class="search-input">
              <i class="fas fa-search search-icon"></i>
            </div>
            <div class="filter-buttons">
              <button class="filter-btn active" data-filter="all">All</button>
              <button class="filter-btn" data-filter="income">Income</button>
              <button class="filter-btn" data-filter="expense">Expense</button>
            </div>
            <div class="advanced-filters">
              <select id="category-filter" class="category-select">
                <option value="all">All Categories</option>
                <option value="food"> Food & Dining</option>
                <option value="transport"> Transportation</option>
                <option value="shopping"> Shopping</option>
                <option value="entertainment"> Entertainment</option>
                <option value="bills"> Bills & Utilities</option>
                <option value="healthcare"> Healthcare</option>
                <option value="education"> Education</option>
                <option value="travel"> Travel</option>
                <option value="salary"> Salary</option>
                <option value="freelance"> Freelance</option>
                <option value="investment"> Investment</option>
                <option value="other"> Other</option>
              </select>
              <div class="date-filters">
                <input type="date" id="date-from" class="date-input" placeholder="From">
                <input type="date" id="date-to" class="date-input" placeholder="To">
              </div>
              <div class="amount-filters">
                <input type="number" id="amount-min" placeholder="Min Amount" class="amount-input" step="0.01">
                <input type="number" id="amount-max" placeholder="Max Amount" class="amount-input" step="0.01">
              </div>
              <button class="clear-filters-btn" id="clear-filters">
                <i class="fas fa-times"></i> Clear Filters
              </button>
            </div>
          </div>
        </div>
        <ul id="list" class="list">
          <!-- Transactions will be added here -->
        </ul>
      </div>

      <!-- Data Management Section -->
      <div class="data-management-section">
        <h3><i class="fas fa-database"></i> Data Management</h3>
        <div class="data-actions">
          <div class="export-section">
            <h4>Export Data</h4>
            <div class="export-buttons">
              <button class="export-btn" id="export-csv">
                <i class="fas fa-file-csv"></i> Quick CSV
              </button>
              <button class="export-btn pdf-btn" id="export-pdf">
                <i class="fas fa-file-pdf"></i> Quick PDF
              </button>
              <button class="export-btn advanced-btn" id="open-export-modal">
                <i class="fas fa-cog"></i> Advanced Export
              </button>
            </div>
          </div>
          <div class="import-section">
            <h4>Import Data</h4>
            <div class="import-controls">
              <input type="file" id="import-file" accept=".csv,.json" class="file-input">
              <label for="import-file" class="file-label">
                <i class="fas fa-upload"></i> Choose File
              </label>
              <button class="import-btn" id="import-data" disabled>
                <i class="fas fa-download"></i> Import Data
              </button>
            </div>
            <div class="import-options">
              <label class="checkbox-label">
                <input type="checkbox" id="merge-data" checked>
                <span class="checkmark"></span>
                Merge with existing data
              </label>
            </div>
          </div>
        </div>
      </div>

      <!-- Export Modal -->
      <div class="export-modal" id="export-modal">
        <div class="export-modal-content">
          <div class="export-modal-header">
            <h3><i class="fas fa-download"></i> Export Expenses</h3>
            <button class="modal-close-btn" id="export-modal-close">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="export-modal-body">
            <!-- Format Selection -->
            <div class="export-format-section">
              <h4>Export Format</h4>
              <div class="format-options">
                <label class="format-option">
                  <input type="radio" name="export-format" id="export-format" value="csv" checked>
                  <div class="format-card">
                    <i class="fas fa-file-csv"></i>
                    <span class="format-name">CSV</span>
                    <span class="format-desc">Excel compatible</span>
                  </div>
                </label>
                <label class="format-option">
                  <input type="radio" name="export-format" value="pdf">
                  <div class="format-card">
                    <i class="fas fa-file-pdf"></i>
                    <span class="format-name">PDF Report</span>
                    <span class="format-desc">With charts & summary</span>
                  </div>
                </label>
              </div>
            </div>

            <!-- Filters -->
            <div class="export-filters-section">
              <h4>Filter Options</h4>
              <div class="filter-grid">
                <div class="form-control">
                  <label for="export-start-date">Start Date</label>
                  <input type="date" id="export-start-date">
                </div>
                <div class="form-control">
                  <label for="export-end-date">End Date</label>
                  <input type="date" id="export-end-date">
                </div>
                <div class="form-control">
                  <label for="export-category-filter">Category</label>
                  <select id="export-category-filter">
                    <option value="all">All Categories</option>
                    <option value="food"> Food & Dining</option>
                    <option value="transport"> Transportation</option>
                    <option value="shopping"> Shopping</option>
                    <option value="entertainment"> Entertainment</option>
                    <option value="utilities"> Bills & Utilities</option>
                    <option value="healthcare"> Healthcare</option>
                    <option value="other"> Other</option>
                  </select>
                </div>
                <div class="form-control">
                  <label for="export-type-filter">Type</label>
                  <select id="export-type-filter">
                    <option value="all">All Types</option>
                    <option value="income"> Income Only</option>
                    <option value="expense"> Expenses Only</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Preview -->
            <div class="export-preview-section">
              <h4>Export Preview</h4>
              <div class="export-preview" id="export-preview">
                <div class="export-preview-loading">Loading preview...</div>
              </div>
            </div>
          </div>

          <div class="export-modal-footer">
            <button type="button" class="btn-cancel" id="export-cancel-btn">Cancel</button>
            <button type="button" class="btn-submit" id="export-submit-btn">
              <i class="fas fa-download"></i> Export
            </button>
          </div>
        </div>
      </div>

      <!-- Add Transaction Form -->
      <div class="form-section">
        <h3><i class="fas fa-plus-circle"></i> Add New Transaction</h3>
        <form id="form" class="transaction-form">
          <div class="form-row">
            <div class="form-control">
              <label for="text">Description</label>
              <input type="text" id="text" placeholder="Enter transaction description" required />
            </div>
            <div class="form-control">
              <label for="category">Category <span id="category-confidence" class="confidence-badge hidden"></span></label>
              <select id="category" required>
                <option value="">Select Category</option>
                <option value="food"> Food & Dining</option>
                <option value="transport"> Transportation</option>
                <option value="shopping"> Shopping</option>
                <option value="entertainment"> Entertainment</option>
                <option value="bills"> Bills & Utilities</option>
                <option value="healthcare"> Healthcare</option>
                <option value="education"> Education</option>
                <option value="travel"> Travel</option>
                <option value="salary"> Salary</option>
                <option value="freelance"> Freelance</option>
                <option value="investment"> Investment</option>
                <option value="other"> Other</option>
              </select>
            </div>
          </div>
          <div class="form-row">
            <div class="form-control">
              <label for="amount">Amount</label>
              <input type="number" id="amount" placeholder="Enter amount" step="0.01" required>
              <small>Tip: Use negative values for expenses, positive for income</small>
            </div>
            <div class="form-control">
              <label for="currency">Currency</label>
              <select id="currency" required>
                <option value="">Loading currencies...</option>
              </select>
            </div>
          </div>
          <div class="form-row">
            <div class="form-control">
              <label for="type">Transaction Type</label>
              <select id="type" required>
                <option value="">Select Type</option>
                <option value="income"> Income</option>
                <option value="expense"> Expense</option>
              </select>
            </div>
            <div class="form-control"></div>
          </div>
          <button type="submit" class="btn-submit">
            <i class="fas fa-plus"></i>
            Add Transaction
          </button>
        </form>
      </div>

      <!-- AI-Driven Budget Intelligence Dashboard -->
      <div class="intelligence-section" id="intelligence-dashboard">
        <div class="section-header">
          <h3><i class="fas fa-brain"></i> AI Budget Intelligence</h3>
          <div class="intelligence-controls">
            <button class="refresh-btn" id="refresh-intelligence" title="Refresh Intelligence Data">
              <i class="fas fa-sync-alt"></i>
            </button>
          </div>
        </div>

        <!-- Intelligence Loading Indicator -->
        <div class="intelligence-loader" id="intelligence-loader">
          <div class="loader-spinner"></div>
          <span>Analyzing spending patterns...</span>
        </div>

        <!-- Summary Cards -->
        <div id="intelligence-summary"></div>

        <!-- Intelligence Tabs -->
        <div class="intelligence-tabs">
          <button class="intelligence-tab active" data-tab="anomalies">
            <i class="fas fa-exclamation-triangle"></i> Anomalies
          </button>
          <button class="intelligence-tab" data-tab="volatility">
            <i class="fas fa-chart-line"></i> Volatility
          </button>
          <button class="intelligence-tab" data-tab="reallocations">
            <i class="fas fa-exchange-alt"></i> Reallocations
          </button>
          <button class="intelligence-tab" data-tab="alerts">
            <i class="fas fa-bell"></i> Alerts
          </button>
          <button class="intelligence-tab" data-tab="budgets">
            <i class="fas fa-wallet"></i> Budgets
          </button>
        </div>

        <!-- Tab Panels -->
        <div class="intelligence-panels">
          <div class="intelligence-panel active" id="anomalies-panel">
            <h4>Z-Score Anomaly Detection</h4>
            <p class="panel-description">Transactions flagged with Z-Score  2.0 (statistically unusual spending)</p>
            <div id="anomaly-timeline"></div>
          </div>

          <div class="intelligence-panel" id="volatility-panel">
            <h4>Spending Volatility Analysis</h4>
            <p class="panel-description">Category volatility index based on coefficient of variation</p>
            <div id="volatility-chart"></div>
          </div>

          <div class="intelligence-panel" id="reallocations-panel">
            <h4>Self-Healing Budget Suggestions</h4>
            <p class="panel-description">AI-suggested fund transfers from surplus to deficit categories</p>
            <div id="reallocation-suggestions"></div>
          </div>

          <div class="intelligence-panel" id="alerts-panel">
            <h4>Budget Alerts</h4>
            <p class="panel-description">AI-driven alerts including predictions and anomaly warnings</p>
            <div id="intelligence-alerts"></div>
          </div>

          <div class="intelligence-panel" id="budgets-panel">
            <h4>Budget Intelligence Overview</h4>
            <p class="panel-description">Budgets with AI-enhanced statistics and predictions</p>
            <div id="budget-intelligence-list"></div>
          </div>
        </div>

        <!-- Transaction Analyzer -->
        <div class="transaction-analyzer">
          <h4><i class="fas fa-search-dollar"></i> Analyze Transaction</h4>
          <form id="analyze-transaction-form" class="analyze-form">
            <div class="analyze-row">
              <input type="number" name="amount" placeholder="Amount" step="0.01" min="0.01" required>
              <select name="category" required>
                <option value="">Select Category</option>
                <option value="food">Food & Dining</option>
                <option value="transport">Transportation</option>
                <option value="shopping">Shopping</option>
                <option value="entertainment">Entertainment</option>
                <option value="bills">Bills & Utilities</option>
                <option value="healthcare">Healthcare</option>
                <option value="other">Other</option>
              </select>
              <input type="text" name="description" placeholder="Description (optional)">
              <button type="submit" class="analyze-btn">
                <i class="fas fa-microscope"></i> Analyze
              </button>
            </div>
          </form>
          <div id="analysis-result"></div>
        </div>
      </div>

      <!-- Recurring Expenses Section -->
      <div class="recurring-section" id="recurring-section">
        <div class="section-header">
          <h3><i class="fas fa-sync-alt"></i> Recurring Expenses & Subscriptions</h3>
          <button class="add-recurring-btn" id="add-recurring-btn">
            <i class="fas fa-plus"></i> Add Recurring
          </button>
        </div>

        <!-- Recurring Statistics -->
        <div class="recurring-stats" id="recurring-stats">
          <!-- Stats will be rendered here -->
        </div>

        <!-- Recurring Expenses List -->
        <div class="recurring-list" id="recurring-list">
          <!-- Recurring expenses will be rendered here -->
        </div>
      </div>

      <!-- Recurring Expense Modal -->
      <div class="recurring-modal" id="recurring-modal">
        <div class="recurring-modal-content">
          <div class="recurring-modal-header">
            <h3 id="recurring-modal-title">Add Recurring Expense</h3>
            <button class="modal-close-btn" id="recurring-modal-close">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <form id="recurring-form" class="recurring-form">
            <input type="hidden" id="recurring-id">

            <div class="form-row">
              <div class="form-control">
                <label for="recurring-description">Description *</label>
                <input type="text" id="recurring-description" placeholder="e.g., Netflix Subscription" required>
              </div>
              <div class="form-control">
                <label for="recurring-amount">Amount () *</label>
                <input type="number" id="recurring-amount" placeholder="499.00" step="0.01" min="0.01" required>
              </div>
            </div>

            <div class="form-row">
              <div class="form-control">
                <label for="recurring-category">Category *</label>
                <select id="recurring-category" required>
                  <option value="">Select Category</option>
                  <option value="subscription"> Subscription</option>
                  <option value="rent"> Rent</option>
                  <option value="insurance"> Insurance</option>
                  <option value="utilities"> Utilities</option>
                  <option value="entertainment"> Entertainment</option>
                  <option value="food"> Food</option>
                  <option value="transport"> Transport</option>
                  <option value="healthcare"> Healthcare</option>
                  <option value="shopping"> Shopping</option>
                  <option value="other"> Other</option>
                </select>
              </div>
              <div class="form-control">
                <label for="recurring-type">Type *</label>
                <select id="recurring-type" required>
                  <option value="expense"> Expense</option>
                  <option value="income"> Income</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-control">
                <label for="recurring-frequency">Frequency *</label>
                <select id="recurring-frequency" required>
                  <option value="monthly">Monthly</option>
                  <option value="weekly">Weekly</option>
                  <option value="biweekly">Bi-weekly</option>
                  <option value="daily">Daily</option>
                  <option value="quarterly">Quarterly</option>
                  <option value="yearly">Yearly</option>
                </select>
              </div>
              <div class="form-control">
                <label for="recurring-reminder-days">Remind Before (days)</label>
                <input type="number" id="recurring-reminder-days" value="3" min="0" max="30">
              </div>
            </div>

            <div class="form-row">
              <div class="form-control">
                <label for="recurring-start-date">Start Date *</label>
                <input type="date" id="recurring-start-date" required>
              </div>
              <div class="form-control">
                <label for="recurring-next-due">Next Due Date *</label>
                <input type="date" id="recurring-next-due" required>
              </div>
            </div>

            <div class="form-row">
              <div class="form-control">
                <label for="recurring-end-date">End Date (optional)</label>
                <input type="date" id="recurring-end-date">
              </div>
              <div class="form-control checkbox-control">
                <label class="checkbox-label">
                  <input type="checkbox" id="recurring-auto-create" checked>
                  <span class="checkmark"></span>
                  Auto-create expense on due date
                </label>
              </div>
            </div>

            <div class="form-control full-width">
              <label for="recurring-notes">Notes (optional)</label>
              <textarea id="recurring-notes" rows="3" placeholder="Add any notes..."></textarea>
            </div>

            <div class="modal-actions">
              <button type="button" class="btn-cancel" id="recurring-cancel-btn">Cancel</button>
              <button type="submit" class="btn-submit">
                <i class="fas fa-save"></i> Save
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </main>

  <!-- Currency Settings Modal -->
  <div id="currency-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-money-bill-wave"></i> Currency Settings</h3>
        <span class="close-modal" onclick="closeCurrencyModal()">&times;</span>
      </div>
      <div class="modal-body">
        <div class="form-control">
          <label for="preferred-currency">Preferred Currency</label>
          <select id="preferred-currency" class="currency-select">
            <option value="">Loading currencies...</option>
          </select>
          <small>All expenses will be converted to this currency for display</small>
        </div>
        <div class="form-control">
          <label>Exchange Rate Info</label>
          <div class="exchange-rate-info" id="exchange-rate-info">
            <p>Select a currency to see current exchange rates</p>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-cancel" onclick="closeCurrencyModal()">Cancel</button>
        <button class="btn-submit" onclick="saveCurrencyPreference()">Save Settings</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
  <div class="footer-container">

    <div class="footer-section">
  <div class="footer-logo">
    <i class="fas fa-wallet"></i>
    <span>ExpenseFlow</span>
  </div>

  <p class="footer-description">
    Smart money management made simple. Track, analyze, and optimize your financial habits.
  </p>

  <div class="social-links">
    <a
      href="https://x.com/9504_renu"
      class="social-link"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="X (Twitter)"
    >
      <i class="fab fa-x-twitter"></i>
    </a>

    <a
      href="https://github.com/Renu-code123/ExpenseFlow"
      class="social-link"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Github"
    >
      <i class="fab fa-github"></i>
    </a>

    <a
      href="mailto:renu89857@gmail.com"
      class="social-link"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Email"
    >
      <i class="far fa-envelope"></i>
    </a>

    <a
      href="https://www.linkedin.com/in/renu-kumari-prajapati"
      class="social-link"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="LinkedIn"
    >
      <i class="fab fa-linkedin-in"></i>
    </a>
  </div>
</div>


    <div class="footer-section">
      <h4>Company</h4>
      <ul class="footer-links">
        <li><a href="AboutUs.html">About Us</a></li>
        <li><a href="PrivacyPolicy.html">Privacy Policy</a></li>
        <li><a href="terms_service.html">Terms of Service</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
    </div>

    <div class="footer-section">
      <h4>Features</h4>
      <ul class="footer-links">
        <li><a href="#">Expense Tracking</a></li>
        <li><a href="#">Budget Planning</a></li>
        <li><a href="#">Analytics Dashboard</a></li>
        <li><a href="#">Goal Setting</a></li>
      </ul>
    </div>

  </div>

<div class="footer-bottom">
  <div class="footer-container">
    <p>&copy; 2026 ExpenseFlow. All rights reserved. Made with  for better financial management.</p>
    <div class="footer-stats">
      <span> Trusted by 10,000+ users</span>
      <span> 50M+ tracked</span>
      <span> 99.9% uptime</span>
    </div>
  </div>
</div>
</footer>

      <div class="footer-section">
        <h4>Features</h4>
        <ul class="footer-links">
          <li><a href="#">Expense Tracking</a></li>
          <li><a href="#">Budget Planning</a></li>
          <li><a href="#">Analytics Dashboard</a></li>
          <li><a href="#">Goal Setting</a></li>
        </ul>
      </div>


  <!-- Authentication working properly now -->
  <!-- All required scripts will be inline -->

  <!-- PWA Installation Prompt -->
  <div id="install-prompt" class="install-prompt" style="display: none;">
    <div class="install-prompt-content">
      <div class="install-prompt-header">
        <i class="fas fa-download"></i>
        <h3>Install ExpenseFlow</h3>
      </div>
      <p>Install ExpenseFlow for quick access and offline functionality!</p>
      <div class="install-prompt-actions">
        <button id="install-button" class="install-btn">
          <i class="fas fa-plus"></i> Install
        </button>
        <button id="install-dismiss" class="dismiss-btn">
          <i class="fas fa-times"></i> Not now
        </button>
      </div>
    </div>
  </div>

  <!-- Offline Indicator -->
  <div id="offline-indicator" class="offline-indicator" style="display: none;">
    <i class="fas fa-wifi-slash"></i>
    <span>You're offline. Changes will be saved locally.</span>
  </div>

  <!-- Update Available Notification -->
  <div id="update-notification" class="update-notification" style="display: none;">
    <div class="update-content">
      <i class="fas fa-sync-alt"></i>
      <span>A new version is available!</span>
      <button id="update-button" class="update-btn">Update Now</button>
    </div>
  </div>
  <script>
// Wait for page to load
window.addEventListener("DOMContentLoaded", () => {
  const toggleBtn = document.getElementById("theme-toggle");
  const body = document.body;

  // Load saved theme from localStorage
  const savedTheme = localStorage.getItem("theme");
  if (savedTheme === "dark") {
    body.classList.add("dark-theme");
    toggleBtn.textContent = ""; // change icon for dark
  }

  // Toggle dark/light mode
  toggleBtn.addEventListener("click", () => {
    body.classList.toggle("dark-theme");

    const isDark = body.classList.contains("dark-theme");
    toggleBtn.textContent = isDark ? "" : "";

    // Save preference
    localStorage.setItem("theme", isDark ? "dark" : "light");
  });
});
</script>

</body>

</html>
  <!-- Chatbot -->


    <!-- Chatbot Widget -->
    <div id="chatbot-container" class="chatbot-container">
      <div id="chatbot-widget" class="chatbot-widget">
        <!-- Chat Header -->
        <div class="chatbot-header">
          <div class="chatbot-header-content">
            <h3>ExpenseFlow Assistant</h3>
            <p>Ask me anything about your finances</p>
          </div>
          <button id="chatbot-close" class="chatbot-close-btn">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <!-- Chat Messages -->
        <div id="chatbot-messages" class="chatbot-messages">
          <div class="chatbot-message bot-message">
            <div class="message-content">
              <p>Hi!  I'm your ExpenseFlow Assistant. How can I help you manage your finances today?</p>
            </div>
          </div>
        </div>
        
        <!-- Chat Input -->
        <div class="chatbot-input-area">
          <form id="chatbot-form" class="chatbot-form">
            <input 
              type="text" 
              id="chatbot-input" 
              class="chatbot-input" 
              placeholder="Type your message..." 
              autocomplete="off"
            >
            <button type="submit" class="chatbot-send-btn">
              <i class="fas fa-paper-plane"></i>
            </button>
          </form>
        </div>
      </div>
      
      <!-- Chat Toggle Button -->
      <button id="chatbot-toggle" class="chatbot-toggle-btn" title="Chat with Assistant">
        <i class="fas fa-comments"></i>
      </button>
    </div><!-- End #protectedContent -->

    <!-- Authentication Prompt for Unauthenticated Users (Premium) -->
    <div id="authPrompt" class="auth-prompt">
      <div class="auth-prompt-content">
        <div class="auth-prompt-icon">
          <i class="fas fa-shield-halved"></i>
        </div>
        <h2>Unlock ExpenseFlow</h2>
        <p>Your journey to financial freedom starts here. Sign in to access smart analytics, personalized goals, and secure tracking.</p>
        
        <div class="auth-prompt-buttons">
          <button class="auth-prompt-btn primary" onclick="openLoginModal()">
            <i class="fas fa-sign-in-alt"></i>
            Login Now
          </button>
          <button class="auth-prompt-btn secondary" onclick="openSignupModal()">
            <i class="fas fa-user-plus"></i>
            Get Started
          </button>
        </div>
        
        <div class="auth-prompt-features">
          <h4>Premium Features:</h4>
          <ul>
            <li><i class="fas fa-check-circle"></i> Smart Tracking</li>
            <li><i class="fas fa-check-circle"></i> Budget Planning</li>
            <li><i class="fas fa-check-circle"></i> Cloud Sync</li>
            <li><i class="fas fa-check-circle"></i> Data Export</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Login Modal Overlay -->
    <div id="loginModal" class="login-modal-overlay">
      <div class="login-modal">
        <button class="login-modal-close" onclick="closeLoginModal()">
          <i class="fas fa-times"></i>
        </button>
        <div class="login-modal-content">
          <div style="text-align:center; font-size:2rem; margin-bottom:0.5rem;">
            <i class="fas fa-lock"></i>
          </div>
          <h2>Login to ExpenseFlow</h2>
          <form id="loginFormModal">
            <div class="form-group">
              <label for="loginEmailModal">Email:</label>
              <input type="email" id="loginEmailModal" required placeholder="Enter your email">
            </div>
            <div class="form-group">
              <label for="loginPasswordModal">Password:</label>
              <input type="password" id="loginPasswordModal" required placeholder="Enter your password">
            </div>
            <button type="submit" class="login-btn">Login</button>
            <p class="login-signup-link">
              Don't have an account? 
              <a href="javascript:void(0)" onclick="switchToSignup()">Sign up here</a>
            </p>
          </form>
        </div>
      </div>
    </div>

    <!-- Signup Modal Overlay -->
    <div id="signupModal" class="login-modal-overlay">
      <div class="login-modal">
        <button class="login-modal-close" onclick="closeSignupModal()">
          <i class="fas fa-times"></i>
        </button>
        <div class="login-modal-content">
          <div style="text-align:center; font-size:2rem; margin-bottom:0.5rem;">
            <i class="fas fa-user-plus"></i>
          </div>
          <h2>Sign Up for ExpenseFlow</h2>
          <form id="signupFormModal">
            <div class="form-group">
              <label for="signupUsernameModal">Username:</label>
              <input type="text" id="signupUsernameModal" required placeholder="Choose a username">
            </div>
            <div class="form-group">
              <label for="signupEmailModal">Email:</label>
              <input type="email" id="signupEmailModal" required placeholder="Enter your email">
            </div>
            <div class="form-group">
              <label for="signupPasswordModal">Password:</label>
              <input type="password" id="signupPasswordModal" required placeholder="Create a password">
            </div>
            <button type="submit" class="login-btn">Sign Up</button>
            <p class="login-signup-link">
              Already have an account? 
              <a href="javascript:void(0)" onclick="switchToLogin()">Login here</a>
            </p>
          </form>
        </div>
      </div>
    </div>



    <script>
      // Mobile Navigation Toggle
      document.addEventListener('DOMContentLoaded', function() {
        const navToggle = document.getElementById('nav-toggle');
        const navMenu = document.getElementById('nav-menu');
        const navLinks = document.querySelectorAll('.nav-link');
        
        if (navToggle) {
          navToggle.addEventListener('click', function() {
            navToggle.classList.toggle('active');
            navMenu.classList.toggle('active');
          });
        }
        
        // Close mobile menu when clicking on a link
        navLinks.forEach(link => {
          link.addEventListener('click', () => {
            navToggle.classList.remove('active');
            navMenu.classList.remove('active');
            
            // Update active state
            navLinks.forEach(l => l.classList.remove('active'));
            link.classList.add('active');
          });
        });
        
        // Close menu when clicking outside
        document.addEventListener('click', (event) => {
          const isClickInsideNav = navMenu.contains(event.target) || navToggle.contains(event.target);
          if (!isClickInsideNav && navMenu.classList.contains('active')) {
            navToggle.classList.remove('active');
            navMenu.classList.remove('active');
          }
        });

        // Authentication State Management - Initialize first
        initializeAuthSystem();
        
        // Chatbot Functionality
        initializeChatbot();
      });

      // =========================
      // LOGIN MODAL FUNCTIONALITY
      // =========================

      function openLoginModal() {
        console.log('Opening login modal...');
        const modal = document.getElementById('loginModal');
        const authPrompt = document.getElementById('authPrompt');
        
        console.log('Modal element found:', !!modal);
        console.log('Auth prompt found:', !!authPrompt);
        
        if (modal) {
          // Hide auth prompt when opening modal
          if (authPrompt) {
            authPrompt.classList.remove('show');
            console.log('Auth prompt hidden');
          }
          
          modal.classList.add('active');
          document.body.classList.add('modal-active');
          
          console.log('Modal classes after opening:', modal.className);
          console.log('Body classes after opening:', document.body.className);
          
          // Focus on email input
          setTimeout(() => {
            const emailInput = document.getElementById('loginEmailModal');
            if (emailInput) emailInput.focus();
          }, 300);
        } else {
          console.error('Login modal element not found!');
          alert('Login modal not found! Check console for details.');
        }
      }

      function closeLoginModal() {
        const modal = document.getElementById('loginModal');
        const authPrompt = document.getElementById('authPrompt');
        if (modal) {
          modal.classList.remove('active');
          document.body.classList.remove('modal-active');
          
          // Show auth prompt again if user is not authenticated
          const token = localStorage.getItem('authToken');
          if (!token && authPrompt) {
            setTimeout(() => authPrompt.classList.add('show'), 300);
          }
        }
      }

      function openSignupModal() {
        const modal = document.getElementById('signupModal');
        const authPrompt = document.getElementById('authPrompt');
        if (modal) {
          // Hide auth prompt when opening modal
          if (authPrompt) authPrompt.classList.remove('show');
          
          modal.classList.add('active');
          document.body.classList.add('modal-active');
          // Focus on username input
          setTimeout(() => {
            const usernameInput = document.getElementById('signupUsernameModal');
            if (usernameInput) usernameInput.focus();
          }, 300);
        }
      }

      function closeSignupModal() {
        const modal = document.getElementById('signupModal');
        const authPrompt = document.getElementById('authPrompt');
        if (modal) {
          modal.classList.remove('active');
          document.body.classList.remove('modal-active');
          
          // Show auth prompt again if user is not authenticated
          const token = localStorage.getItem('authToken');
          if (!token && authPrompt) {
            setTimeout(() => authPrompt.classList.add('show'), 300);
          }
        }
      }

      function switchToSignup() {
        closeLoginModal();
        setTimeout(() => openSignupModal(), 100);
      }

      function switchToLogin() {
        closeSignupModal();
        setTimeout(() => openLoginModal(), 100);
      }

      // Close modal when clicking outside
      document.addEventListener('click', (event) => {
        const loginModal = document.getElementById('loginModal');
        const signupModal = document.getElementById('signupModal');
        
        if (loginModal && loginModal.classList.contains('active')) {
          if (event.target === loginModal) {
            closeLoginModal();
          }
        }
        
        if (signupModal && signupModal.classList.contains('active')) {
          if (event.target === signupModal) {
            closeSignupModal();
          }
        }
      });

      // Close modal on Escape key
      document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape') {
          closeLoginModal();
          closeSignupModal();
        }
      });

      // Handle Login Form Submission
      document.addEventListener('DOMContentLoaded', function() {
        const loginForm = document.getElementById('loginFormModal');
        const signupForm = document.getElementById('signupFormModal');

        if (loginForm) {
          loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('loginEmailModal').value.trim();
            const password = document.getElementById('loginPasswordModal').value.trim();
            
            if (!email || !password) {
              showNotification('Please fill in all fields', 'error');
              return;
            }
            
            try {
              // Simulate login API call (replace with actual authentication)
              const response = await fetch('/api/auth/login', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({ email, password }),
              });
              
              if (response.ok) {
                const data = await response.json();
                localStorage.setItem('authToken', data.token);
                localStorage.setItem('userInfo', JSON.stringify(data.user));
                
                showNotification('Login successful! Welcome back.', 'success');
                closeLoginModal();
                updateAuthState(true, data.user);
              } else {
                const error = await response.json();
                showNotification(error.message || 'Login failed', 'error');
              }
            } catch (error) {
              console.error('Login error:', error);
              showNotification('Connection error. Please try again.', 'error');
            }
          });
        }

        if (signupForm) {
          signupForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const username = document.getElementById('signupUsernameModal').value.trim();
            const email = document.getElementById('signupEmailModal').value.trim();
            const password = document.getElementById('signupPasswordModal').value.trim();
            
            if (!username || !email || !password) {
              showNotification('Please fill in all fields', 'error');
              return;
            }
            
            try {
              // Simulate signup API call (replace with actual registration)
              const response = await fetch('/api/auth/signup', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({ username, email, password }),
              });
              
              if (response.ok) {
                const data = await response.json();
                localStorage.setItem('authToken', data.token);
                localStorage.setItem('userInfo', JSON.stringify(data.user));
                
                showNotification('Registration successful! Welcome to ExpenseFlow.', 'success');
                closeSignupModal();
                updateAuthState(true, data.user);
              } else {
                const error = await response.json();
                showNotification(error.message || 'Registration failed', 'error');
              }
            } catch (error) {
              console.error('Signup error:', error);
              showNotification('Connection error. Please try again.', 'error');
            }
          });
        }
      });

      // Authentication System Initialization
      function initializeAuthSystem() {
        console.log('Initializing authentication system...');
        
        // Check if elements exist
        const loginModal = document.getElementById('loginModal');
        const authPrompt = document.getElementById('authPrompt');
        const authButtons = document.getElementById('authButtons');
        
        console.log('Auth elements found:', {
          loginModal: !!loginModal,
          authPrompt: !!authPrompt,
          authButtons: !!authButtons
        });
        
        // Clear any existing auth state on page load
        localStorage.removeItem('authToken');
        localStorage.removeItem('userInfo');
        
        // Always start in unauthenticated state for demo
        updateAuthState(false);
        
        // Force show auth prompt immediately
        if (authPrompt) {
          authPrompt.classList.add('show');
          console.log('Auth prompt shown');
        } else {
          console.error('Auth prompt element not found!');
        }
        
        checkAuthState();
      }
      
      // Authentication State Management
      function checkAuthState() {
        const token = localStorage.getItem('authToken');
        const userInfo = localStorage.getItem('userInfo');
        
        if (token && userInfo) {
          try {
            const user = JSON.parse(userInfo);
            updateAuthState(true, user);
          } catch (error) {
            console.error('Error parsing user info:', error);
            logout();
          }
        } else {
          updateAuthState(false);
          // Show login prompt for unauthenticated users
          showAuthPrompt();
        }
      }

      function updateAuthState(isLoggedIn, user = null) {
        const authButtons = document.getElementById('authButtons');
        const userInfo = document.getElementById('userInfo');
        const protectedElements = document.querySelectorAll('.protected-content');
        const navLinks = document.querySelectorAll('.nav-link:not(.public)');
        
        if (isLoggedIn && user) {
          // Show user info, hide auth buttons
          if (authButtons) authButtons.style.display = 'none';
          if (userInfo) {
            userInfo.style.display = 'flex';
            const username = userInfo.querySelector('.username');
            if (username) username.textContent = user.username || user.name || user.email;
          }
          
          // Enable protected content
          protectedElements.forEach(element => {
            element.style.display = '';
            element.style.pointerEvents = 'auto';
            element.style.opacity = '1';
          });
          
          // Enable navigation links
          navLinks.forEach(link => {
            link.style.pointerEvents = 'auto';
            link.style.opacity = '1';
            link.removeAttribute('disabled');
          });
          
          // Hide auth prompt
          hideAuthPrompt();
        } else {
          // Show auth buttons, hide user info
          if (authButtons) authButtons.style.display = 'flex';
          if (userInfo) userInfo.style.display = 'none';
          
          // Disable protected content
          protectedElements.forEach(element => {
            element.style.display = 'none';
          });
          
          // Disable navigation links
          navLinks.forEach(link => {
            link.style.pointerEvents = 'none';
            link.style.opacity = '0.5';
            link.addEventListener('click', handleUnauthorizedClick);
          });
        }
      }

      function logout() {
        localStorage.removeItem('authToken');
        localStorage.removeItem('userInfo');
        updateAuthState(false);
        showNotification('Logged out successfully', 'info');
      }

      function showNotification(message, type = 'info') {
        // Create notification element
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.innerHTML = `
          <div class="notification-content">
            <i class="fas ${getNotificationIcon(type)}"></i>
            <span>${message}</span>
          </div>
          <button class="notification-close" onclick="this.parentElement.remove()">
            <i class="fas fa-times"></i>
          </button>
        `;
        
        // Add to page
        document.body.appendChild(notification);
        
        // Show notification
        setTimeout(() => notification.classList.add('show'), 100);
        
        // Auto remove after 5 seconds
        setTimeout(() => {
          if (notification.parentElement) {
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300);
          }
        }, 5000);
      }

      function getNotificationIcon(type) {
        switch (type) {
          case 'success': return 'fa-check-circle';
          case 'error': return 'fa-exclamation-triangle';
          case 'warning': return 'fa-exclamation-circle';
          default: return 'fa-info-circle';
        }
      }
      
      // Handle unauthorized access attempts
      function handleUnauthorizedClick(e) {
        e.preventDefault();
        e.stopPropagation();
        showNotification('Please login to access this feature', 'warning');
        setTimeout(() => openLoginModal(), 500);
        return false;
      }
      
      // Show authentication prompt
      function showAuthPrompt() {
        const authPrompt = document.getElementById('authPrompt');
        if (authPrompt) {
          authPrompt.classList.add('show');
        }
      }
      
      // Hide authentication prompt
      function hideAuthPrompt() {
        const authPrompt = document.getElementById('authPrompt');
        if (authPrompt) {
          authPrompt.classList.remove('show');
        }
      }

      // Debug function to test modal visibility
      function testModal() {
        console.log('=== MODAL DEBUG ===');
        const loginModal = document.getElementById('loginModal');
        const authPrompt = document.getElementById('authPrompt');
        const authButtons = document.getElementById('authButtons');
        
        console.log('Login Modal:', loginModal);
        console.log('Auth Prompt:', authPrompt);
        console.log('Auth Buttons:', authButtons);
        
        if (loginModal) {
          console.log('Modal classes:', loginModal.className);
          const computed = window.getComputedStyle(loginModal);
          console.log('Modal computed:', {
            display: computed.display,
            visibility: computed.visibility,
            opacity: computed.opacity,
            zIndex: computed.zIndex
          });
          
          // Force show modal for testing
          loginModal.classList.add('active');
          document.body.classList.add('modal-active');
          loginModal.style.zIndex = '9999';
          loginModal.style.display = 'flex';
          loginModal.style.visibility = 'visible';
          loginModal.style.opacity = '1';
          
          console.log('Forced modal visibility - classes:', loginModal.className);
        }
        
        if (authPrompt) {
          console.log('Auth prompt classes:', authPrompt.className);
          const computed = window.getComputedStyle(authPrompt);
          console.log('Auth prompt computed:', {
            display: computed.display,
            visibility: computed.visibility,
            opacity: computed.opacity
          });
        }
        
        alert('Check console for detailed modal debug info. Modal should now be visible.');
      }

      // =========================
      // END LOGIN MODAL FUNCTIONALITY
      // =========================

      function initializeChatbot() {
        const chatbotToggle = document.getElementById('chatbot-toggle');
        const chatbotWidget = document.getElementById('chatbot-widget');
        const chatbotForm = document.getElementById('chatbot-form');
        const chatbotInput = document.getElementById('chatbot-input');
        const chatbotMessages = document.getElementById('chatbot-messages');
        const chatbotClose = document.getElementById('chatbot-close');

        // Toggle chatbot window
        chatbotToggle.addEventListener('click', () => {
          chatbotWidget.classList.toggle('active');
          if (chatbotWidget.classList.contains('active')) {
            chatbotToggle.classList.add('hidden');
            chatbotInput.focus();
          } else {
            chatbotToggle.classList.remove('hidden');
          }
        });

        // Close chatbot window
        chatbotClose.addEventListener('click', () => {
          chatbotWidget.classList.remove('active');
          chatbotToggle.classList.remove('hidden');
        });

        // Handle form submission
        chatbotForm.addEventListener('submit', (e) => {
          e.preventDefault();
          const message = chatbotInput.value.trim();
          
          if (message) {
            // Add user message
            addMessage(message, 'user');
            chatbotInput.value = '';
            
            // Simulate bot response
            setTimeout(() => {
              const response = getBotResponse(message);
              addMessage(response, 'bot');
            }, 500);
          }
        });

        function addMessage(text, sender) {
          const messageDiv = document.createElement('div');
          messageDiv.className = `chatbot-message ${sender}-message`;
          
          const contentDiv = document.createElement('div');
          contentDiv.className = 'message-content';
          
          const p = document.createElement('p');
          p.textContent = text;
          
          contentDiv.appendChild(p);
          messageDiv.appendChild(contentDiv);
          
          chatbotMessages.appendChild(messageDiv);
          
          // Auto scroll to bottom
          chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }

        function getBotResponse(userMessage) {
          const lowerMessage = userMessage.toLowerCase();
          
          // Expense-related responses
          if (lowerMessage.includes('add') && (lowerMessage.includes('expense') || lowerMessage.includes('transaction'))) {
            return "You can add an expense by scrolling down to the 'Add New Transaction' form. Fill in the description, amount, category, and date, then click submit! ";
          }
          
          if (lowerMessage.includes('budget')) {
            return "Budget planning is a great way to manage your spending! You can set budget goals by category to track your spending limits. Would you like tips on creating an effective budget? ";
          }
          
          if (lowerMessage.includes('goal') || lowerMessage.includes('savings')) {
            return "Setting financial goals helps you stay motivated! You can create short-term and long-term goals to work towards your financial dreams. What's your goal? ";
          }
          
          if (lowerMessage.includes('category')) {
            return "We support many categories including: Food, Transportation, Shopping, Entertainment, Bills, Healthcare, Education, Travel, Salary, Freelance, Investment, and more! Pick what works for you. ";
          }
          
          if (lowerMessage.includes('receipt')) {
            return "You can upload receipts to verify your expenses! This helps you keep accurate records and track your spending better. Perfect for important purchases! ";
          }
          
          if (lowerMessage.includes('sync') || lowerMessage.includes('offline')) {
            return "ExpenseFlow works offline and syncs your data when you're back online! Your data is always safe and accessible. No worries about losing your information! ";
          }
          
          if (lowerMessage.includes('delete') || lowerMessage.includes('edit')) {
            return "You can edit or delete transactions from your history. Just click on any transaction to modify it or remove it. Easy management! ";
          }
          
          if (lowerMessage.includes('help') || lowerMessage.includes('how')) {
            return "I'm here to help! You can ask me about:\n Adding expenses\n Creating budgets\n Setting goals\n Managing receipts\n Categories\n And more!\n\nWhat would you like to know? ";
          }
          
          if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
            return "Hey there!  I'm your ExpenseFlow Assistant. How can I help you manage your finances today?";
          }
          
          // Default responses
          const responses = [
            "That's a great question! Feel free to explore ExpenseFlow's features or ask me more about managing your expenses. ",
            "I'm here to help you manage your finances better! Is there anything specific you'd like to know? ",
            "Thanks for that message! I'm learning to help you even better. Check out the features above or ask me another question! ",
            "Interesting! Remember, smart money management is all about tracking and planning. How can I assist you further? ",
            "I'm always here to help! Feel free to ask me anything about budgeting, expense tracking, or financial planning. "
          ];
          
          return responses[Math.floor(Math.random() * responses.length)];
        }
      }
    </script>
    </div> <!-- End #protectedContent -->
  </body>
</html>
