<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tax Calculator & Reports - ExpenseFlow</title>
  <link rel="stylesheet" href="expensetracker.css">
  <style>
    :root {
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --success: #059669;
      --warning: #d97706;
      --danger: #dc2626;
      --gray-50: #f9fafb;
      --gray-100: #f3f4f6;
      --gray-200: #e5e7eb;
      --gray-300: #d1d5db;
      --gray-500: #6b7280;
      --gray-700: #374151;
      --gray-900: #111827;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: var(--gray-50);
      margin: 0;
      padding: 0;
      color: var(--gray-900);
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header */
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 20px;
    }

    .page-header h1 {
      margin: 0;
      font-size: 28px;
      color: var(--gray-900);
    }

    .header-controls {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    /* Tabs */
    .tabs {
      display: flex;
      gap: 5px;
      margin-bottom: 30px;
      border-bottom: 2px solid var(--gray-200);
      padding-bottom: 0;
    }

    .tab-btn {
      padding: 12px 24px;
      background: none;
      border: none;
      font-size: 15px;
      font-weight: 500;
      color: var(--gray-500);
      cursor: pointer;
      border-bottom: 3px solid transparent;
      margin-bottom: -2px;
      transition: all 0.2s;
    }

    .tab-btn:hover {
      color: var(--primary);
    }

    .tab-btn.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Cards */
    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      padding: 24px;
      margin-bottom: 24px;
    }

    .card h2, .card h3 {
      margin-top: 0;
      color: var(--gray-900);
    }

    /* Tax Summary Grid */
    .tax-summary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .tax-card {
      background: var(--gray-50);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
    }

    .tax-card h4 {
      margin: 0 0 10px;
      font-size: 14px;
      color: var(--gray-500);
      font-weight: 500;
    }

    .tax-card .amount {
      font-size: 24px;
      font-weight: 700;
      color: var(--gray-900);
      margin: 0;
    }

    .tax-card .rate {
      font-size: 12px;
      color: var(--gray-500);
    }

    .tax-card.highlight {
      background: var(--primary);
      color: white;
    }

    .tax-card.highlight h4,
    .tax-card.highlight .amount,
    .tax-card.highlight .rate {
      color: white;
    }

    .tax-card.due {
      background: #fef2f2;
      border: 1px solid #fecaca;
    }

    .tax-card.due .amount {
      color: var(--danger);
    }

    .tax-card.refund {
      background: #ecfdf5;
      border: 1px solid #a7f3d0;
    }

    .tax-card.refund .amount {
      color: var(--success);
    }

    /* Tax Table */
    .tax-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }

    .tax-table th,
    .tax-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid var(--gray-200);
    }

    .tax-table th {
      background: var(--gray-50);
      font-weight: 600;
      font-size: 13px;
      color: var(--gray-600);
      text-transform: uppercase;
    }

    .tax-table tfoot td {
      font-weight: 600;
    }

    .tax-table .total-row {
      background: var(--primary);
      color: white;
    }

    .tax-table .total-row td {
      border-bottom: none;
    }

    /* Regime Comparison */
    .regime-comparison-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }

    .regime-card {
      background: var(--gray-50);
      border-radius: 12px;
      padding: 24px;
      position: relative;
    }

    .regime-card.recommended {
      border: 2px solid var(--success);
      background: #ecfdf5;
    }

    .regime-card h4 {
      margin: 0 0 15px;
      font-size: 18px;
    }

    .regime-card .badge {
      position: absolute;
      top: -10px;
      right: 20px;
      background: var(--success);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }

    .regime-details p {
      margin: 8px 0;
      color: var(--gray-700);
    }

    .regime-details .tax-amount {
      font-size: 24px;
      font-weight: 700;
      color: var(--gray-900);
    }

    .regime-recommendation {
      text-align: center;
      margin-top: 20px;
    }

    .savings-message {
      font-size: 18px;
      font-weight: 600;
      color: var(--success);
    }

    /* Profile Settings */
    .profile-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    .profile-item {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .profile-item label {
      font-size: 14px;
      font-weight: 500;
      color: var(--gray-600);
    }

    .profile-item select,
    .profile-item input {
      padding: 10px 14px;
      border: 1px solid var(--gray-300);
      border-radius: 8px;
      font-size: 14px;
    }

    .toggle-container {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .toggle {
      position: relative;
      width: 48px;
      height: 26px;
    }

    .toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--gray-300);
      transition: 0.3s;
      border-radius: 26px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 20px;
      width: 20px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.3s;
      border-radius: 50%;
    }

    .toggle input:checked + .toggle-slider {
      background-color: var(--primary);
    }

    .toggle input:checked + .toggle-slider:before {
      transform: translateX(22px);
    }

    /* Reports Section */
    .report-form {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .form-group label {
      font-size: 14px;
      font-weight: 500;
      color: var(--gray-600);
    }

    .form-group select,
    .form-group input {
      padding: 10px 14px;
      border: 1px solid var(--gray-300);
      border-radius: 8px;
      font-size: 14px;
    }

    /* Quick Reports */
    .quick-reports {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid var(--gray-200);
    }

    .quick-reports span {
      font-size: 14px;
      color: var(--gray-500);
      margin-right: 10px;
    }

    /* Reports Table */
    .reports-table {
      width: 100%;
      border-collapse: collapse;
    }

    .reports-table th,
    .reports-table td {
      padding: 14px;
      text-align: left;
      border-bottom: 1px solid var(--gray-200);
    }

    .reports-table th {
      background: var(--gray-50);
      font-weight: 600;
      font-size: 13px;
      color: var(--gray-600);
    }

    .reports-table .actions {
      display: flex;
      gap: 8px;
    }

    /* Report View */
    .report-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 24px;
    }

    .report-header h3 {
      margin: 0;
    }

    .report-period {
      color: var(--gray-500);
      margin: 4px 0 0;
    }

    .report-summary {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }

    .summary-card {
      padding: 20px;
      border-radius: 12px;
      text-align: center;
    }

    .summary-card h4 {
      margin: 0 0 8px;
      font-size: 14px;
      font-weight: 500;
    }

    .summary-card p {
      margin: 0;
      font-size: 28px;
      font-weight: 700;
    }

    .summary-card.income {
      background: #ecfdf5;
      color: var(--success);
    }

    .summary-card.expense {
      background: #fef2f2;
      color: var(--danger);
    }

    .summary-card.profit {
      background: #eff6ff;
      color: var(--primary);
    }

    .summary-card.loss {
      background: #fef2f2;
      color: var(--danger);
    }

    /* Breakdown Tables */
    .breakdown-section,
    .trends-section,
    .tax-summary-section {
      margin-top: 30px;
    }

    .breakdown-section h4,
    .trends-section h4,
    .tax-summary-section h4 {
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--gray-200);
    }

    .breakdown-table,
    .trends-table {
      width: 100%;
      border-collapse: collapse;
    }

    .breakdown-table th,
    .breakdown-table td,
    .trends-table th,
    .trends-table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid var(--gray-200);
    }

    .breakdown-table th,
    .trends-table th {
      background: var(--gray-50);
      font-weight: 600;
      font-size: 13px;
      color: var(--gray-600);
    }

    .positive {
      color: var(--success);
    }

    .negative {
      color: var(--danger);
    }

    /* Buttons */
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background: var(--primary-dark);
    }

    .btn-secondary {
      background: var(--gray-100);
      color: var(--gray-700);
    }

    .btn-secondary:hover {
      background: var(--gray-200);
    }

    .btn-icon {
      padding: 8px;
      background: var(--gray-100);
      border: none;
      border-radius: 6px;
      cursor: pointer;
      color: var(--gray-600);
    }

    .btn-icon:hover {
      background: var(--gray-200);
    }

    .btn-icon.danger:hover {
      background: #fecaca;
      color: var(--danger);
    }

    /* Badge */
    .badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
      background: var(--gray-100);
      color: var(--gray-700);
    }

    /* Deductions */
    .deductions-breakdown {
      margin-top: 30px;
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--gray-500);
    }

    .empty-state p {
      margin: 10px 0;
    }

    .empty-state .hint {
      font-size: 14px;
    }

    /* Notifications */
    #notification-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .notification {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 15px;
      padding: 14px 20px;
      border-radius: 10px;
      background: white;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      animation: slideIn 0.3s ease;
    }

    .notification.success {
      border-left: 4px solid var(--success);
    }

    .notification.error {
      border-left: 4px solid var(--danger);
    }

    .notification.info {
      border-left: 4px solid var(--primary);
    }

    .notification button {
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
      color: var(--gray-500);
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* Loading Spinner */
    .spinner {
      width: 40px;
      height: 40px;
      border: 3px solid var(--gray-200);
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 20px auto;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* Responsive */
    @media (max-width: 768px) {
      .regime-comparison-grid {
        grid-template-columns: 1fr;
      }

      .report-summary {
        grid-template-columns: 1fr;
      }

      .page-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .tabs {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }
    }
  </style>
</head>
<body>

        <!-- Smooth Cursor Trail -->
<style>
  .cursor-trail-container {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 999999;
  }

  .trail-dot {
    position: absolute;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: linear-gradient(135deg, #64ffda 0%, #00b4d8 100%);
    box-shadow: 
      0 0 15px rgba(100, 255, 218, 0.8),
      0 0 30px rgba(100, 255, 218, 0.4);
    transform: translate(-50%, -50%);
    will-change: transform, opacity;
    mix-blend-mode: screen;
    transition: opacity 0.3s ease, transform 0.3s ease;
  }

  .trail-dot:first-child {
    width: 12px;
    height: 12px;
    background: linear-gradient(135deg, #64ffda 0%, #00b4d8 100%);
    box-shadow: 
      0 0 20px rgba(100, 255, 218, 0.9),
      0 0 40px rgba(100, 255, 218, 0.6);
    z-index: 2;
  }

  .cursor-clicking {
    transform: translate(-50%, -50%) scale(1.5);
    background: linear-gradient(135deg, #ff6b9d 0%, #ffcc00 100%) !important;
    box-shadow: 
      0 0 25px rgba(255, 107, 157, 0.9),
      0 0 50px rgba(255, 107, 157, 0.6) !important;
  }

  .cursor-hovering {
    transform: translate(-50%, -50%) scale(1.3);
    background: linear-gradient(135deg, #00b4d8 0%, #64ffda 100%) !important;
  }
</style>

<div class="cursor-trail-container" id="cursor-trail"></div>

<script>
(function() {
  // Hide default cursor
  document.body.style.cursor = 'none';

  const container = document.getElementById('cursor-trail');
  const coords = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
  const trailCircles = [];
  const COUNT = 12; // Fewer circles for smoother trail

  // Create trail circles
  for (let i = 0; i < COUNT; i++) {
    const circle = document.createElement('div');
    circle.className = 'trail-dot';

    // Opacity decreases along the trail
    const opacity = 0.9 - (i / COUNT) * 0.8;
    circle.style.opacity = opacity.toString();

    // Size decreases along the trail
    const scale = 1 - (i / COUNT) * 0.5;
    circle.style.transform = `translate(-50%, -50%) scale(${scale})`;

    container.appendChild(circle);
    trailCircles.push({ 
      element: circle, 
      x: coords.x, 
      y: coords.y,
      targetX: coords.x,
      targetY: coords.y
    });
  }

  // Track mouse position
  let isMoving = false;
  let lastMouseX = coords.x;
  let lastMouseY = coords.y;
  let velocity = { x: 0, y: 0 };

  window.addEventListener('mousemove', e => {
    coords.x = e.clientX;
    coords.y = e.clientY;

    // Calculate velocity for smooth movement
    velocity.x = e.clientX - lastMouseX;
    velocity.y = e.clientY - lastMouseY;
    lastMouseX = e.clientX;
    lastMouseY = e.clientY;

    isMoving = true;

    // Reset movement timeout
    clearTimeout(window.movementTimeout);
    window.movementTimeout = setTimeout(() => {
      isMoving = false;
    }, 50);
  });

  // Click effect
  window.addEventListener('mousedown', () => {
    trailCircles.forEach(circle => {
      circle.element.classList.add('cursor-clicking');
    });
  });

  window.addEventListener('mouseup', () => {
    trailCircles.forEach(circle => {
      circle.element.classList.remove('cursor-clicking');
    });
  });

  // Hover effect for interactive elements
  window.addEventListener('mouseover', e => {
    const interactive = e.target.closest('a, button, input, select, textarea, [role="button"]');
    trailCircles.forEach(circle => {
      circle.element.classList.toggle('cursor-hovering', !!interactive);
    });
  });

  // Smooth animation function
  function animateTrail() {
    let targetX = coords.x;
    let targetY = coords.y;

    // Add velocity offset to first circle for more natural feel
    const velocityOffset = 0.5;
    const offsetX = velocity.x * velocityOffset;
    const offsetY = velocity.y * velocityOffset;

    trailCircles.forEach((circle, index) => {
      // First circle follows cursor exactly
      if (index === 0) {
        circle.x = targetX + offsetX;
        circle.y = targetY + offsetY;
      } 
      // Other circles follow with smooth delay
      else {
        const prevCircle = trailCircles[index - 1];

        // Smooth interpolation factor (changes based on movement speed)
        const speed = Math.sqrt(velocity.x * velocity.x + velocity.y * velocity.y);
        const lerpFactor = isMoving ? 
          Math.min(0.3 + (speed * 0.01), 0.5) :  // Faster movement = tighter trail
          0.1; // Slow movement = more spread

        circle.x += (prevCircle.x - circle.x) * lerpFactor;
        circle.y += (prevCircle.y - circle.y) * lerpFactor;
      }

      // Apply position with easing
      circle.element.style.left = circle.x + 'px';
      circle.element.style.top = circle.y + 'px';

      // Dynamic opacity based on speed and position
      if (index > 0) {
        const speed = Math.sqrt(velocity.x * velocity.x + velocity.y * velocity.y);
        const baseOpacity = 0.9 - (index / COUNT) * 0.8;
        const speedMultiplier = Math.min(1 + speed * 0.02, 1.5);
        circle.element.style.opacity = (baseOpacity * speedMultiplier).toString();
      }

      // Update target for next circle
      targetX = circle.x;
      targetY = circle.y;
    });

    requestAnimationFrame(animateTrail);
  }

  // Handle window resize
  window.addEventListener('resize', () => {
    // Adjust if cursor goes out of bounds
    if (coords.x > window.innerWidth) coords.x = window.innerWidth;
    if (coords.y > window.innerHeight) coords.y = window.innerHeight;
  });

  // Handle mouse leave/enter
  window.addEventListener('mouseleave', () => {
    trailCircles.forEach(circle => {
      circle.element.style.opacity = '0';
    });
  });

  window.addEventListener('mouseenter', () => {
    trailCircles.forEach((circle, index) => {
      const opacity = 0.9 - (index / COUNT) * 0.8;
      circle.element.style.opacity = opacity.toString();
    });
  });

  // Start animation
  animateTrail();
})();
</script>

  <div class="container">
    <header class="page-header">
      <div>
        <h1>Tax Calculator & Reports</h1>
        <p style="color: var(--gray-500); margin: 5px 0 0;">Calculate taxes and generate financial reports</p>
      </div>
      <div class="header-controls">
        <select id="tax-year-selector">
          <script>
            const currentYear = new Date().getFullYear();
            for (let y = currentYear; y >= currentYear - 5; y--) {
              document.write(`<option value="${y}" ${y === currentYear ? 'selected' : ''}>FY ${y}-${(y+1).toString().slice(-2)}</option>`);
            }
          </script>
        </select>
        <a href="index.html" class="btn btn-secondary">Back to Dashboard</a>
      </div>
    </header>

    <div class="tabs">
      <button class="tab-btn active" data-tab="tax-calculator">Tax Calculator</button>
      <button class="tab-btn" data-tab="reports">Financial Reports</button>
      <button class="tab-btn" data-tab="settings">Tax Settings</button>
    </div>

    <!-- Tax Calculator Tab -->
    <div id="tax-calculator" class="tab-content active">
      <div class="card">
        <h2>Tax Summary</h2>
        <div id="tax-calculation-result">
          <div class="empty-state">
            <p>Loading tax calculation...</p>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Compare Tax Regimes</h2>
        <p style="color: var(--gray-500); margin-bottom: 20px;">Compare Old vs New tax regime to find the best option for you</p>
        <button class="btn btn-primary" onclick="taxReports.compareRegimes()">Compare Regimes</button>
        <div id="regime-comparison" style="margin-top: 20px;"></div>
      </div>

      <div class="card">
        <h2>Tax Deductions</h2>
        <p style="color: var(--gray-500);">Your tax-deductible expenses for the financial year</p>
        <div id="deductions-list">
          <div class="empty-state">
            <p>Track tax-deductible expenses to reduce your tax liability</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Reports Tab -->
    <div id="reports" class="tab-content">
      <div class="card">
        <h2>Generate Report</h2>
        <form id="report-form" class="report-form">
          <div class="form-group">
            <label for="reportType">Report Type</label>
            <select name="reportType" id="reportType" required>
              <option value="expense_summary">Expense Summary</option>
              <option value="income_statement">Income Statement</option>
              <option value="profit_loss">Profit & Loss</option>
              <option value="tax_report">Tax Report</option>
              <option value="category_breakdown">Category Breakdown</option>
              <option value="monthly_comparison">Monthly Comparison</option>
              <option value="annual_summary">Annual Summary</option>
            </select>
          </div>
          <div class="form-group">
            <label for="startDate">Start Date</label>
            <input type="date" name="startDate" id="startDate" required>
          </div>
          <div class="form-group">
            <label for="endDate">End Date</label>
            <input type="date" name="endDate" id="endDate" required>
          </div>
          <div class="form-group">
            <label for="currency">Currency</label>
            <select name="currency" id="currency">
              <option value="INR">INR (₹)</option>
              <option value="USD">USD ($)</option>
              <option value="EUR">EUR (€)</option>
              <option value="GBP">GBP (£)</option>
            </select>
          </div>
          <div class="form-group" style="justify-content: flex-end;">
            <button type="submit" class="btn btn-primary">Generate Report</button>
          </div>
        </form>
        <div class="quick-reports">
          <span>Quick Reports:</span>
          <button class="btn btn-secondary" data-quick-report="this-month">This Month</button>
          <button class="btn btn-secondary" data-quick-report="last-month">Last Month</button>
          <button class="btn btn-secondary" data-quick-report="this-quarter">This Quarter</button>
          <button class="btn btn-secondary" data-quick-report="this-year">This Year</button>
          <button class="btn btn-secondary" data-quick-report="financial-year">Financial Year</button>
        </div>
      </div>

      <div class="card">
        <h2>Report Preview</h2>
        <div id="report-view">
          <div class="empty-state">
            <p>Select or generate a report to view</p>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Previous Reports</h2>
        <div id="reports-list">
          <div class="empty-state">
            <p>No reports generated yet</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Settings Tab -->
    <div id="settings" class="tab-content">
      <div class="card">
        <h2>Tax Profile Settings</h2>
        <div class="profile-grid">
          <div class="profile-item">
            <label>Country</label>
            <select id="profile-country-select" onchange="taxReports.updateProfile({ country: this.value })">
              <option value="IN">India</option>
              <option value="US">United States</option>
              <option value="UK">United Kingdom</option>
            </select>
          </div>
          <div class="profile-item">
            <label>Tax Regime</label>
            <div class="toggle-container">
              <span>Old</span>
              <label class="toggle">
                <input type="checkbox" id="regime-toggle" checked>
                <span class="toggle-slider"></span>
              </label>
              <span>New</span>
            </div>
          </div>
          <div class="profile-item">
            <label>Standard Deduction</label>
            <span id="profile-standard-deduction">₹0.00</span>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>TDS & Advance Tax</h2>
        <div class="profile-grid">
          <div class="profile-item">
            <label for="tds-input">TDS Deducted</label>
            <input type="number" id="tds-input" placeholder="Enter TDS amount" min="0">
          </div>
          <div class="profile-item">
            <label for="advance-tax-input">Advance Tax Paid</label>
            <input type="number" id="advance-tax-input" placeholder="Enter advance tax" min="0">
          </div>
          <div class="profile-item" style="justify-content: flex-end;">
            <button class="btn btn-primary" onclick="taxReports.updateProfile({ 
              tdsDeducted: parseFloat(document.getElementById('tds-input').value) || 0,
              advanceTaxPaid: parseFloat(document.getElementById('advance-tax-input').value) || 0
            })">Update</button>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>Custom Deductions</h2>
        <p style="color: var(--gray-500); margin-bottom: 20px;">Add custom deductions like 80C investments, HRA, LTA, etc.</p>
        <div id="custom-deductions-list">
          <div class="empty-state">
            <p>No custom deductions added</p>
            <button class="btn btn-primary" onclick="showAddDeductionModal()">Add Deduction</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="protect.js"></script>
  <script src="tax-reports.js"></script>
  <script>
    // Tab switching
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        
        btn.classList.add('active');
        document.getElementById(btn.dataset.tab).classList.add('active');
      });
    });

    // Set default dates for report form
    const today = new Date();
    const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);
    document.getElementById('startDate').valueAsDate = startOfMonth;
    document.getElementById('endDate').valueAsDate = today;

    // Initialize tax calculation on load
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        if (taxReports) {
          taxReports.calculateTax();
          taxReports.loadReports();
        }
      }, 500);
    });

    // Add deduction modal placeholder
    function showAddDeductionModal() {
      alert('Add deduction modal - implement based on your UI requirements');
    }
  </script>
</body>
</html>
