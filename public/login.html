<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#64ffda">
  <meta name="description" content="Take control of your finances with our intuitive expense tracker">
  <meta name="keywords" content="expense tracker, budget, finance, money management, PWA">
  <meta name="author" content="ExpenseFlow">
  
  <!-- PWA Meta Tags -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="ExpenseFlow">
  <meta name="msapplication-TileColor" content="#0f0f23">
  <meta name="msapplication-navbutton-color" content="#64ffda">
  
  <!-- Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- Clerk Authentication SDK - REPLACE WITH YOUR KEY -->
  <script
    async
    crossorigin="anonymous"
    data-clerk-publishable-key="your publishable key here"
     src="https://your-app-slug.clerk.accounts.dev/npm/@clerk/clerk-js@5/dist/clerk.browser.js"
    type="text/javascript"
  ></script>
  
  <title>Login - ExpenseFlow</title>
  <link rel="stylesheet" href="expensetracker.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
  .cursor-trail-container {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 999999;
  }

  .trail-dot {
    position: absolute;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: linear-gradient(135deg, #64ffda 0%, #00b4d8 100%);
    box-shadow: 
      0 0 15px rgba(100, 255, 218, 0.8),
      0 0 30px rgba(100, 255, 218, 0.4);
    transform: translate(-50%, -50%);
    will-change: transform, opacity;
    mix-blend-mode: screen;
    transition: opacity 0.3s ease, transform 0.3s ease;
  }

  .trail-dot:first-child {
    width: 12px;
    height: 12px;
    background: linear-gradient(135deg, #64ffda 0%, #00b4d8 100%);
    box-shadow: 
      0 0 20px rgba(100, 255, 218, 0.9),
      0 0 40px rgba(100, 255, 218, 0.6);
    z-index: 2;
  }

  .cursor-clicking {
    transform: translate(-50%, -50%) scale(1.5);
    background: linear-gradient(135deg, #ff6b9d 0%, #ffcc00 100%) !important;
    box-shadow: 
      0 0 25px rgba(255, 107, 157, 0.9),
      0 0 50px rgba(255, 107, 157, 0.6) !important;
  }

  .cursor-hovering {
    transform: translate(-50%, -50%) scale(1.3);
    background: linear-gradient(135deg, #00b4d8 0%, #64ffda 100%) !important;
  }

    /* =========================
   MOBILE RESPONSIVE STYLES
   ========================= */
    @media (max-width: 768px) {

      /* General */
      body {
        overflow-x: hidden;
      }

      .container {
        padding: 1rem;
      }

      /* Navbar */
      .nav-menu {
        position: absolute;
        top: 70px;
        left: 0;
        width: 100%;
        background: #0f0f23;
        flex-direction: column;
        align-items: center;
        display: none;
      }

      .nav-menu.active {
        display: flex;
      }

      .nav-link {
        padding: 1rem;
        width: 100%;
        text-align: center;
      }

      .nav-toggle {
        display: block;
        cursor: pointer;
      }

      .user-profile {
        display: none;
      }

      /* Hero */
      .hero-title {
        font-size: 1.8rem;
        text-align: center;
      }

      .hero-subtitle {
        text-align: center;
        font-size: 1rem;
      }

      /* Balance & Cards */
      .inc-exp-container {
        flex-direction: column;
        gap: 1rem;
      }

      .balance-card {
        text-align: center;
      }

      /* Filters */
      .filter-controls {
        flex-direction: column;
        gap: 0.75rem;
      }

      .advanced-filters {
        flex-direction: column;
      }

      .date-filters,
      .amount-filters {
        flex-direction: column;
        width: 100%;
      }

      /* Transaction Form */
      .form-row {
        flex-direction: column;
      }

      .form-control {
        width: 100%;
      }

      /* Footer */
      .footer-container {
        flex-direction: column;
        gap: 2rem;
        text-align: center;
      }

      .footer-stats {
        flex-direction: column;
        gap: 0.5rem;
      }
    }

    /* Auth page layout */
    .main-content {
      min-height: calc(100vh - 160px);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem 1rem;
      padding-top:3rem;
    }

    .auth-page-wrapper {
      width: 100%;
      max-width: 480px;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-left:2rem;
      margin: 3rem 3rem ;
    }

    .auth-icon {
      font-size: 2.5rem;
      color: #64ffda;
      margin-bottom: 0.5rem;
    }

    .auth-title {
      text-align: center;
      margin-bottom: 1.5rem;
      font-weight: 600;
      font-size: 1.8rem;
      color: #ffffff;
    }

    /* Clerk component overrides */
    #clerk-sign-in,
    #clerk-sign-up {
      width: 100%;
    }

    /* Make Clerk card blend with dark theme */
    .cl-rootBox {
      width: 100% !important;
    }

    .cl-card {
      background: rgba(26, 26, 46, 0.95) !important;
      border: 1px solid rgba(100, 255, 218, 0.15) !important;
      border-radius: 16px !important;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4) !important;
      backdrop-filter: blur(20px) !important;
    }

    .cl-headerTitle {
      color: #64ffda !important;
    }

    .cl-headerSubtitle {
      color: #a0aec0 !important;
    }

    .cl-formFieldLabel {
      color: #e2e8f0 !important;
    }

    .cl-formFieldInput {
      background: #2d3748 !important;
      border-color: #4a5568 !important;
      color: #e2e8f0 !important;
    }

    .cl-formButtonPrimary {
      background: #64ffda !important;
      color: #0f0f23 !important;
      font-weight: 600 !important;
    }

    .cl-formButtonPrimary:hover {
      background: #4fd1c5 !important;
    }

    .cl-footerActionLink {
      color: #64ffda !important;
    }

    .cl-socialButtonsBlockButton {
      background: #2d3748 !important;
      border-color: #4a5568 !important;
      color: #e2e8f0 !important;
    }

    .cl-socialButtonsBlockButton:hover {
      background: #3d4a5c !important;
    }

    .cl-internal-b3fm6y {
      color: #a0aec0 !important;
    }

    .cl-footerAction {
      color: #a0aec0 !important;
    }

    /* Footer social link visibility */
    .social-link {
      color: #ffffff !important;
      font-size: 1.1rem;
    }

    .social-link:hover {
      color: #0f0f23 !important;
      background: #64ffda !important;
    }

    .social-link .fa-github {
      color: #ffffff;
    }

    /* Mobile adjustments */
    @media (max-width: 480px) {
      .auth-page-wrapper {
        padding: 0 0.5rem;
      }
      .auth-title {
        font-size: 1.5rem;
      }
    }
      #redirect{
        display: flex;
        justify-content: center;
        align-items: center;
        margin-left: 12px;
        border: 1px solid #64ffda;
        background-color: #0f0f23;
        padding: 6px 12px;
        border-radius: 8px;
        transition: background-color 0.3s ease;
    }
    #redirect a{
        color: #64ffda;
        text-decoration: none;
        font-weight: 500;
        margin-right: 8px;
    }
      .footer-links {
        display: grid;
        grid-template-columns: repeat(2, minmax(100px, 1fr));
    }
</style>
</head>
<body>
  <!-- Cursor Trail
  <div class="cursor-trail-container" id="cursor-trail"></div> -->

  <!-- Header -->
  <header class="header">
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-logo">
          <i class="fas fa-wallet"></i>
          <span>ExpenseFlow</span>
        </div>
        <div class="nav-menu" id="nav-menu">
          <div class="nav-item">
            <a href="dashboard.html" class="nav-link">
              <i class="fas fa-chart-pie"></i>
              <span>Dashboard</span>
            </a>
          </div>
          <div class="nav-item">
            <a href="Monthlysummary.html" class="nav-link">
              <i class="fas fa-calendar-alt"></i>
              <span>Monthly Summary</span>
            </a>
          </div>
          <div class="nav-item">
            <a href="CurrencyConverter.html" class="nav-link">
              <i class="fas fa-exchange-alt"></i>
              <span>Currency Converter</span>
            </a>
          </div>
          <div class="nav-item">
            <a href="feedback.html" class="nav-link">
              <i class="fas fa-comment-dots"></i>
              <span>Feedback</span>
            </a>
          </div>
          <div class="nav-menu" id="nav-menu">
            <div class="nav-item">
              <a href="dashboard.html" class="nav-link">
                <i class="fas fa-chart-pie"></i>
                <span>Dashboard</span>
              </a>
            </div>
            <div class="nav-item">
              <a href="Monthlysummary.html" class="nav-link">
                <i class="fas fa-calendar-alt"></i>
                <span>Monthly Summary</span>
              </a>
            </div>
            <div class="nav-item">
              <a href="CurrencyConverter.html" class="nav-link">
                <i class="fas fa-exchange-alt"></i>
                <span>Currency Converter</span>
              </a>
            </div>
            <div class="nav-item">
              <a href="feedback.html" class="nav-link">
                <i class="fas fa-comment-dots"></i>
                <span>Feedback</span>
              </a>
            </div>
            <div class="nav-item">
              <a href="schemes.html" class="nav-link">
                <i class="fas fa-piggy-bank"></i>
                <span>Schemes</span>
              </a>
            </div>
          </div>
          <div class="nav-toggle" id="nav-toggle">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
          </div>
          <div class="user-profile">
            <div class="currency-selector">
              <button
                class="currency-btn"
                onclick="openCurrencyModal()"
                title="Currency Settings"
              >
                <i class="fas fa-coins"></i>
                <span id="current-currency">INR</span>
              </button>
            </div>
            <div class="auth-buttons">
              <div class="auth-btn signup-btn">
                <a href="signup.html">
                  <i class="fas fa-user-plus"></i>
                  <span>Sign Up</span>
                </a>
              </div>
              <div class="auth-btn login-btn active">
<a href="javascript:void(0)" onclick="openLoginModal()">
                  <i class="fas fa-sign-in-alt"></i>
                  <span>Login</span>
                </a>
              </div>
            </div>
          </div>
        </div>
        <div class="nav-toggle" id="nav-toggle">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </div>
        <div class="user-profile">
            <div id="redirect">
                <a href="signup.html">Sign up</a>
            </div>
            <div class="auth-btn login-btn active">
<a href="javascript:void(0)" onclick="openLoginModal()">
                <i class="fas fa-sign-in-alt"></i>
                <span>Login</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <div class="auth-page-wrapper">
      <div class="auth-icon">
      
      </div>
      <h2 class="auth-title"></h2>
      <!-- Clerk Sign In Component will mount here -->
      <div id="clerk-sign-in"></div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-section">
        <div class="footer-logo">
          <i class="fas fa-wallet"></i>
          <span>ExpenseFlow</span>
        </div>
        <p class="footer-description">
          Smart money management made simple. Track, analyze, and optimize your financial habits.
        </p>
        <div class="social-links">
          <a href="https://x.com/9504_renu" class="social-link" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
            <i class="fab fa-x-twitter"></i>
          </a>
          <a href="https://github.com/Renu-code123/ExpenseFlow" class="social-link" target="_blank" rel="noopener noreferrer" aria-label="Github">
            <i class="fab fa-github"></i>
          </a>
          <a href="mailto:renu89857@gmail.com" class="social-link" target="_blank" rel="noopener noreferrer" aria-label="Email">
            <i class="far fa-envelope"></i>
          </a>
          <a href="https://www.linkedin.com/in/renu-kumari-prajapati" class="social-link" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
            <i class="fab fa-linkedin-in"></i>
          </a>
        </div>
      </div>
      <div class="footer-section">
        <h4>Company</h4>
        <ul class="footer-links">
          <li><a href="AboutUs.html">About Us</a></li>
          <li><a href="PrivacyPolicy.html">Privacy Policy</a></li>
          <li><a href="terms_service.html">Terms of Service</a></li>
          <li><a href="Help-Center.html">Help Center</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <div class="footer-container">
        <p id="copyright" style="text-align: center;"></p>
        <div class="footer-stats">
          <span>üèÜ Trusted by 10,000+ users</span>
          <span>üí∞ ‚Çπ50M+ tracked</span>
          <span>üìä 99.9% uptime</span>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    // Copyright year
    document.getElementById("copyright").innerHTML = `&copy; ${new Date().getFullYear()} ExpenseFlow. All rights reserved.`;

    // Clerk Authentication
    window.addEventListener('load', async function() {
      // Prevent infinite redirect loop
      const redirectCount = parseInt(sessionStorage.getItem('loginRedirectCount') || '0');
      if (redirectCount > 3) {
        console.error('Too many redirects detected, stopping...');
        sessionStorage.removeItem('loginRedirectCount');
        document.getElementById('clerk-sign-in').innerHTML = `
          <div style="text-align: center; padding: 2rem; color: #e74c3c;">
            <h3>Authentication Error</h3>
            <p>Unable to initialize authentication. Please clear your browser cache and try again.</p>
            <button onclick="sessionStorage.clear(); location.reload();" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #64ffda; border: none; border-radius: 4px; cursor: pointer;">
              Clear Cache & Retry
            </button>
          </div>
        `;
        return;
      }
      
      try {
        // Wait for Clerk to load with timeout
        if (!window.Clerk) {
          console.error('Clerk SDK not loaded');
          document.getElementById('clerk-sign-in').innerHTML = `
            <div style="text-align: center; padding: 2rem; color: #e74c3c;">
              <h3>Authentication Error</h3>
              <p>Failed to load authentication. Please refresh the page.</p>
            </div>
          `;
          return;
        }

        // Add timeout to Clerk.load()
        const loadPromise = window.Clerk.load();
        const timeoutPromise = new Promise((_, reject) => 
          setTimeout(() => reject(new Error('Clerk load timeout')), 10000)
        );
        
        await Promise.race([loadPromise, timeoutPromise]);

        // If already signed in, redirect to dashboard
        if (window.Clerk.user) {
          sessionStorage.setItem('loginRedirectCount', (redirectCount + 1).toString());
          const redirectUrl = sessionStorage.getItem('redirectAfterLogin') || '/index.html';
          sessionStorage.removeItem('redirectAfterLogin');
          window.location.href = redirectUrl;
          return;
        }

        // Clear redirect counter on successful load
        sessionStorage.removeItem('loginRedirectCount');

        // Mount Clerk sign-in component
        window.Clerk.mountSignIn(document.getElementById('clerk-sign-in'), {
          afterSignInUrl: '/index.html',
          signUpUrl: '/signup.html',
          appearance: {
            elements: {
              formButtonPrimary: {
                backgroundColor: '#64ffda',
                color: '#0f0f23',
                '&:hover': {
                  backgroundColor: '#4fd1c5'
                }
              },
              card: {
                backgroundColor: '#1a1a2e',
                boxShadow: '0 8px 32px rgba(100, 255, 218, 0.1)',
                padding: '2rem'
              },
              headerTitle: {
                color: '#64ffda',
                fontSize: '1.5rem'
              },
              headerSubtitle: {
                color: '#a0aec0'
              },
              formFieldLabel: {
                color: '#e2e8f0'
              },
              formFieldInput: {
                backgroundColor: '#2d3748',
                borderColor: '#4a5568',
                color: '#e2e8f0'
              },
              footerActionLink: {
                color: '#64ffda'
              },
              socialButtonsBlockButton: {
                backgroundColor: '#2d3748',
                borderColor: '#4a5568',
                color: '#e2e8f0'
              }
            }
          }
        });

      } catch (error) {
        console.error('Error loading Clerk:', error);
        document.getElementById('clerk-sign-in').innerHTML = `
          <div style="text-align: center; padding: 2rem; color: #e74c3c;">
            <h3>Authentication Error</h3>
            <p>Failed to load authentication. Please refresh the page.</p>
          </div>
        `;
      }
    });

    // Mobile Navigation Toggle
    const navToggle = document.getElementById('nav-toggle');
    const navMenu = document.getElementById('nav-menu');
    
    if (navToggle) {
      navToggle.addEventListener('click', () => {
        navMenu.classList.toggle('active');
      });
    }
  </script>
</body>
</html>
